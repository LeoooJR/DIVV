<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VCF comparison report</title>
  <script src="assets/js/plotly-3.0.0.min.js" charset="utf-8"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
  <script src="assets/js/alasql-4.6.5.js"></script>
</head>

<body onload="filter(); highlightCommand();">

    <div class="flex flex-row w-full items-stretch">

        <div class="flex flex-row w-1/2 flex-1 bg-[white] h-auto">
            <img src="statics/vcf-left.png" alt="vcf-icon-white" class="self-center h-[70px] w-[70px] pl-[10px] pt-[5px] pb-[5px]">
            <h2 class="mt-[20px] mb-[10px] min-h-[36px] font-[Ubuntu] font-bold italic text-center text-2xl items-center w-full text-[#111111] whitespace-normal">
              {{ vcfs.repository[0].informations().basename|default(vcfs.repository[0]) }}
            </h2>
        </div>

        <div class="flex flex-row w-1/2 flex-1 bg-[#111111] h-auto">
            <img src="statics/vcf-right.png" alt="vcf-icon-black" class="self-center h-[70px] w-[70px] pl-[10px] pt-[5px] pb-[5px]">
            <h2 class="mt-[20px] mb-[10px] min-h-[36px] font-[Ubuntu] font-bold italic text-center text-2xl items-center w-full text-[white] whitespace-normal">
              {{ vcfs.repository[1].informations().basename|default(vcfs.repository[1]) }}
            </h2>
        </div>

    </div>

    <div class="flex flex-row w-full">

        <div class="flex flex-row w-1/2 bg-[#EEF0F1]">

            <img src="statics/info-left.png" class="w-10 h-10 md:w-[39px] md:h-[39px] ml-[10px] mt-[5px] mb-[5px] self-center align-middle mr-[5px]", id="info-left-icon">

            <div class="flex flex-row justify-center items-center flex-wrap w-full pt-[5px] overflow-x-auto">

              <div class="flex flex-row border-[solid] border-transparent rounded-[2em] m-[2px] h-[90%] bg-[#D7F1FD] items-center [box-shadow:0px_0px_5px_-3px_#111]">
                <img src="statics/folder.png" class="w-[20px] pl-[5px] pt-[5px] pb-[5px] self-center align-middle">
                <p class="items-center text-[15px] pl-[5px] pr-[5px] font-bold text-center leading-[22px] overflow-scroll font-[Ubuntu] text-[#0C2A75]">
                    {{ vcfs.repository[0].informations().path|default(vcfs.repository[0]) }}
                </p>
              </div>

              <div class="flex flex-row border-[solid] border-transparent rounded-[2em] m-[2px] h-[90%] bg-[#D7F1FD] items-center [box-shadow:0px_0px_5px_-3px_#111]">
                <img src="statics/database.png" class="w-[20px] pl-[5px] pt-[5px] pb-[5px] self-center align-middle">
                <p class="items-center text-[15px] pl-[5px] pr-[5px] font-bold text-center leading-[22px] overflow-scroll font-[Ubuntu] text-[#0C2A75]">
                    {{ vcfs.repository[0].informations().size|default('NA') }} Mo
                </p>
              </div>

              <div class="flex flex-row border-[solid] border-transparent rounded-[2em] m-[2px] h-[90%] bg-[#D7F1FD] items-center [box-shadow:0px_0px_5px_-3px_#111]">
                <img src="statics/file.png" class="w-[20px] pl-[5px] pt-[5px] pb-[5px] self-center align-middle">
                <p class="items-center text-[15px] pl-[5px] pr-[5px] font-bold text-center leading-[22px] overflow-scroll font-[Ubuntu] text-[#0C2A75]">
                    {{ vcfs.repository[0].informations().mtime|default('NA') }}
                </p>
              </div>

            </div>

            <div class="relative mr-[10px] mt-[10px]">

              <img src="statics/down-arrow-left.png" class="w-10 h-10 md:w-[39px] md:h-[39px] ml-[10px] mt-[5px] mb-[5px] self-center align-middle mr-[5px] cursor-pointer" id="dropdown-icon-left">

              <div data-component="notification-metadata" class="absolute -top-1 -right-1 w-4 h-4">
                <div id="ping-metadata-left" class="w-full h-full bg-red-400 rounded-full animate-ping"></div>
              </div>

            </div>

        </div>

        <div class="flex flex-row w-1/2 bg-[#333333]">

            <img src="statics/info-right.png" class="w-10 h-10 md:w-[39px] md:h-[39px] ml-[10px] mt-[5px] mb-[5px] self-center align-middle mr-[5px]", id="info-right-icon">

            <div class="flex flex-row justify-center items-center flex-wrap w-full pt-[5px] overflow-x-auto">

              <div class="flex flex-row border-[solid] border-transparent rounded-[2em] m-[2px] h-[90%] bg-[#D7F1FD] items-center [box-shadow:0px_0px_5px_-3px_#111]">
                <img src="statics/folder.png" class="w-[20px] pl-[5px] pt-[5px] pb-[5px] self-center align-middle">
                <p class="items-center text-[15px] pl-[5px] pr-[5px] font-bold text-center leading-[22px] overflow-scroll font-[Ubuntu] text-[#0C2A75]">
                    {{ vcfs.repository[1].informations().path|default(vcfs.repository[1]) }}
                </p>
              </div>

              <div class="flex flex-row border-[solid] border-transparent rounded-[2em] m-[2px] h-[90%] bg-[#D7F1FD] items-center [box-shadow:0px_0px_5px_-3px_#111]">
                <img src="statics/database.png" class="w-[20px] pl-[5px] pt-[5px] pb-[5px] self-center align-middle">
                <p class="items-center text-[15px] pl-[5px] pr-[5px] font-bold text-center leading-[22px] overflow-scroll font-[Ubuntu] text-[#0C2A75]">
                    {{ vcfs.repository[1].informations().size|default('NA') }} Mo
                </p>
              </div>

              <div class="flex flex-row border-[solid] border-transparent rounded-[2em] m-[2px] h-[90%] bg-[#D7F1FD] items-center [box-shadow:0px_0px_5px_-3px_#111]">
                <img src="statics/file.png" class="w-[20px] pl-[5px] pt-[5px] pb-[5px] self-center align-middle">
                <p class="items-center text-[15px] pl-[5px] pr-[5px] font-bold text-center leading-[22px] overflow-scroll font-[Ubuntu] text-[#0C2A75]">
                    {{ vcfs.repository[1].informations().mtime|default('NA') }}
                </p>
              </div>

            </div>

            <div class="relative mr-[10px] mt-[10px]">

              <img src="statics/down-arrow-right.png" class="w-10 h-10 md:w-[39px] md:h-[39px] ml-[10px] mt-[5px] mb-[5px] self-center align-middle mr-[5px] cursor-pointer" id="dropdown-icon-right">

              <div data-component="notification-metadata" class="absolute -top-1 -right-1 w-4 h-4">
                <div id="ping-metadata-right" class="w-full h-full bg-red-400 rounded-full animate-ping"></div>
              </div>

            </div>
        </div>
    </div>

    <div class="bg-[linear-gradient(to_right,_#eef0f1_50%,_#333333_50%)] w-full block pt-[2px] pb-[2px]">

      {% if table is not none %}
        <div class="flex flex-row w-full bg-[linear-gradient(to_right,_#eef0f1_50%,_#333333_50%)]">
          <div class="flex w-1/2 justify-center">
            <div data-component="info-popup" class="font-[system-ui,_-apple-system,_BlinkMacSystemFont,_'Segoe_UI',_Roboto,_Oxygen,_Ubuntu,_Cantarell,_'Open_Sans',_'Helvetica_Neue',_sans-serif] w-[320px] p-[12px] mb-[5px] hidden flex-row items-center bg-[#D7F1FD] rounded-[8px] [box-shadow:0px_0px_5px_-3px_#111]">
              <div class="w-[20px] h-[20px] -translate-y-[2px] mr-[8px]">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" height="24" fill="none">
                  <path fill="#509AF8" d="m12 1.5c-5.79844 0-10.5 4.70156-10.5 10.5 0 5.7984 4.70156 10.5 10.5 10.5 5.7984 0 10.5-4.7016 10.5-10.5 0-5.79844-4.7016-10.5-10.5-10.5zm.75 15.5625c0 .1031-.0844.1875-.1875.1875h-1.125c-.1031 0-.1875-.0844-.1875-.1875v-6.375c0-.1031.0844-.1875.1875-.1875h1.125c.1031 0 .1875.0844.1875.1875zm-.75-8.0625c-.2944-.00601-.5747-.12718-.7808-.3375-.206-.21032-.3215-.49305-.3215-.7875s.1155-.57718.3215-.7875c.2061-.21032.4864-.33149.7808-.3375.2944.00601.5747.12718.7808.3375.206.21032.3215.49305.3215.7875s-.1155.57718-.3215.7875c-.2061.21032-.4864.33149-.7808.3375z">
                  </path>
                </svg>
              </div>
              <div class="font-medium text-[14px] text-[#0C2A75]">This VCF has been set as <strong>reference</strong>.</div>
            </div>
          </div>
          <div class="flex w-1/2 justify-center">
            <div data-component="info-popup" class="font-[system-ui,_-apple-system,_BlinkMacSystemFont,_'Segoe_UI',_Roboto,_Oxygen,_Ubuntu,_Cantarell,_'Open_Sans',_'Helvetica_Neue',_sans-serif] w-[320px] p-[12px] mb-[5px] hidden flex-row items-center bg-[#D7F1FD] rounded-[8px] [box-shadow:0px_0px_5px_-3px_#111]">
              <div class="w-[20px] h-[20px] -translate-y-[2px] mr-[8px]">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" height="24" fill="none">
                  <path fill="#509AF8" d="m12 1.5c-5.79844 0-10.5 4.70156-10.5 10.5 0 5.7984 4.70156 10.5 10.5 10.5 5.7984 0 10.5-4.7016 10.5-10.5 0-5.79844-4.7016-10.5-10.5-10.5zm.75 15.5625c0 .1031-.0844.1875-.1875.1875h-1.125c-.1031 0-.1875-.0844-.1875-.1875v-6.375c0-.1031.0844-.1875.1875-.1875h1.125c.1031 0 .1875.0844.1875.1875zm-.75-8.0625c-.2944-.00601-.5747-.12718-.7808-.3375-.206-.21032-.3215-.49305-.3215-.7875s.1155-.57718.3215-.7875c.2061-.21032.4864-.33149.7808-.3375.2944.00601.5747.12718.7808.3375.206.21032.3215.49305.3215.7875s-.1155.57718-.3215.7875c-.2061.21032-.4864.33149-.7808.3375z">
                  </path>
                </svg>
              </div>
              <div class="font-medium text-[14px] text-[#0C2A75]">This VCF has been set as <strong>query</strong>.</div>
            </div>
          </div>
        </div>
      {% endif %}

      <div id="command" class="mockup-code !bg-[#202425] w-[90%] ml-[5%] mr-[5%] hidden">
        <pre data-prefix="$"><code>{{ cmd }}</code></pre>
        <pre data-prefix=">" class="text-success !text-green-200"><code>Done!</code></pre>
      </div>

    </div>

    <section class="flex flex-row w-full m-0 p-0">

        <div class="grid grid-cols-[1fr] grid-rows-[1fr] [direction:ltr] gap-[8px] flex-wrap w-[50%] bg-[white]">
            {% for plot in vcfs.repository[0].variants.plots.as_html() %}
              {% if loop.index == 1 %}
                <div class="w-full visible opacity-100 relative" id="left-plot{{ loop.index }}" data-component="plot-left">
                  {{ plot }}
                </div>
              {% else %}
                <div class="invisible opacity-0 w-full [transition:opacity_0.3s_ease-in-out]" id="left-plot{{ loop.index }}" data-component="plot-left">
                  {{ plot }}
                </div>
              {% endif %}
            {% endfor %}
            <div class="flex justify-between items-center w-full mx-[0] my-[10px]">
              <div class="flex justify-center w-full pl-[20px]">
                  <div class="cursor-pointer text-[24px] bg-[rgba(200,_200,_200,_0.3)] rounded-[50%] flex items-center justify-center w-[40px] h-[40px] [transition:all_0.3s_ease] mb-[5px] text-[black] hover:bg-[rgba(150,_150,_150,_0.7)] hover:scale-110" id="leftPrevArrow">&#8592;</div>
                  <div class="flex gap-[5px] mx-[15px] my-[0] items-center" id="leftPlotIndicator"></div>
                  <div class="cursor-pointer text-[24px] bg-[rgba(200,_200,_200,_0.3)] rounded-[50%] flex items-center justify-center w-[40px] h-[40px] [transition:all_0.3s_ease] mb-[5px] text-[black] hover:bg-[rgba(150,_150,_150,_0.7)] hover:scale-110" id="leftNextArrow">&#8594;</div>
              </div>
            </div>
        </div>

        <div class="grid grid-cols-[1fr] grid-rows-[1fr] [direction:ltr] gap-[8px] flex-wrap w-[50%] bg-[#111111]">
            {% for plot in vcfs.repository[1].variants.plots.as_html() %}
              {% if loop.index == 1 %}
                <div class="w-full visible opacity-100 relative" id="right-plot{{ loop.index }}" data-component="plot-right">
                  {{ plot }}
                </div>
              {% else %}
                <div class="invisible opacity-0 w-full [transition:opacity_0.3s_ease-in-out]" id="right-plot{{ loop.index }}" data-component="plot-right">
                  {{ plot }}
                </div>
              {% endif %}
            {% endfor %}
            <div class="flex justify-between items-center w-full mx-[0] my-[10px]">
              <div class="flex justify-center w-full pl-[20px]">
                <div class="cursor-pointer text-[24px] bg-[rgba(200,_200,_200,_0.3)] rounded-[50%] flex items-center justify-center w-[40px] h-[40px] [transition:all_0.3s_ease] mb-[5px] text-[white] hover:bg-[rgba(150,_150,_150,_0.7)] hover:scale-110" id="rightPrevArrow">&#8592;</div>
                <div class="flex gap-[5px] mx-[15px] my-[0] items-center" id="rightPlotIndicator"></div>
                <div class="cursor-pointer text-[24px] bg-[rgba(200,_200,_200,_0.3)] rounded-[50%] flex items-center justify-center w-[40px] h-[40px] [transition:all_0.3s_ease] mb-[5px] text-[white] hover:bg-[rgba(150,_150,_150,_0.7)] hover:scale-110" id="rightNextArrow">&#8594;</div>
              </div>
            </div>
        </div>

    </section>

    <div class="flex flex-row w-full">

        <div class="flex flex-row w-[50%] bg-[#EEF0F1] justify-center">
            <div class="block">
                <img src="statics/search.png" alt="search-icon" class="w-[45px] h-[45px] m-1">
            </div>
        </div>

        <div class="flex flex-row w-[50%] bg-[#333333] justify-center">
            <div class="block">
                <img src="statics/filters.png" alt="parameters-icon" class="w-[45px] h-[45px] m-1">
            </div>
        </div>

    </div>

    <div class="flex flex-row w-full max-w-[100%] box-border">

      <div class="flex flex-row w-[50%] bg-[white] justify-center max-w-[50%] overflow-hidden">

        <div class="flex flex-row items-center justify-center m-[2%] w-full gap-[10px] min-w-0 flex-wrap">

              <img src="statics/chromosome.png" alt="chromosomes-icon" class="w-[50px] h-[50px]">

              <div class="h-[45px] border-[1px] border-[solid] border-[#3d444d] rounded-xl px-[15px] py-[5px] bg-[#0d1117] [box-shadow:0_0_20px_rgba(0,_0,_0,_0.5)] [transition:150ms_cubic-bezier(0.4,0,0.2,1)] flex flew-row items-center hover:border-[#999999] min-w-[180px] flex-shrink">

                <div class="relative w-full h-full flex items-center min-w-0">

                  <input id="query-chromosome" placeholder="Search chromosome" class="h-full border-[0] border-transparent text-[1rem] pr-[60px] text-[#cccccc] bg-[#0d1117] border-r-[2px_solid_#3d444d] outline-[none] placeholder:text-white focus:text-[white] focus:placeholder:text-[white] min-w-0 flex-shrink w-full" type="text">

                  <div class="absolute right-0 top-1/2 transform -translate-y-1/2 w-[52px] h-[35px] bg-transparent rounded-r-xl [transition:150ms_cubic-bezier(0.4,0,0.2,1)] flex items-center justify-center hover:bg-[#3d444d] flex-shrink-0">

                    <button class="w-full h-full bg-transparent border-[none] cursor-pointer rounded-r-xl [transition:150ms_cubic-bezier(0.4,0,0.2,1)] opacity-[.4] flex items-center justify-center hover:opacity-[.8]">
                      <i class="w-[21px] h-[21px] flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 512 512">
                          <path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z" fill="#fff">
                          </path>
                        </svg>
                      </i>
                    </button>

                  </div>

                </div>

              </div>

            
            <div class="w-fit min-w-0 flex-shrink flex flew-row gap-2 items-center">
              <img src="statics/puzzle.png" alt="puzzle-icon" class="w-[50px] h-[50px]">
              <select id="query-status" class="select select-md px-[10px] py-[10px] rounded-[5px] border-[none] min-w-[150px] max-w-full text-[14px] font-[Ubuntu] bg-neutral text-[white] cursor-pointer">
                  <option selected disabled>Select a status...</option>
                  <option>ALL</option>
                  <option>MATCH</option>
                  <option>MISMATCH</option>
              </select>
            </div>

        </div>

      </div>

      <div class="flex flex-row bg-[#111111] w-[50%] overflow-hidden">
        <div class="flex flex-row w-full m-[2%] gap-[10px] items-center justify-center flex-wrap min-w-0">
            <div class="w-fit mr-[5%] min-w-0 flex-shrink flex flex-row gap-2 items-center">
              <img src="statics/filter.png" alt="filter-icon" class="w-[50px] h-[50px]">
                <select id="query-filter" class="select select-md px-[10px] py-[10px] rounded-[5px] border-[none] min-w-[150px] max-w-full text-[14px] font-[Ubuntu] text-[black] cursor-pointer">
                    <option selected disabled>Select a filter...</option>
                    <option>ALL</option>
                    <option>PASS</option>
                    <option>FAIL</option>
                </select>
            </div>
            <div class="w-fit mr-[5%] min-w-0 flex-shrink flex flex-row gap-2 items-center">
              <img src="statics/dna.png" alt="dna-icon" class="w-[50px] h-[50px]">
                <select id="query-variant" class="select select-md px-[10px] py-[10px] rounded-[5px] border-[none] min-w-[150px] max-w-full text-[14px] font-[Ubuntu] text-[black] cursor-pointer">
                    <option selected disabled>Select a variant...</option>
                    <option>ALL</option>
                    <option>SNP</option>
                    <option>INDEL</option>
                    <option>OTHER</option>
                </select>
            </div>
            <img src="statics/terminal.png" alt="terminal-icon" class="w-[50px] h-[50px] cursor-pointer flex-shrink-0" id="terminal-icon">
            <button id="reset-button" class="bg-[rgba(79,_70,_229,_0.9)] border-[none] rounded-[6px] px-[20px] py-[10px] m-[3%] cursor-pointer text-[14px] text-white rounded-[16px] font-[Ubuntu] font-bold hover:bg-[rgba(67,_56,_202,_0.9)] flex-shrink-0 whitespace-nowrap" onclick="resetFilters()">Reset</button>
        </div>
      </div>
    </div>

    <div class="bg-[linear-gradient(to_right,_white_50%,_#111111_50%)] w-full block pt-[2px] pb-[2px]">
      <div id="terminal" class="bg-[rgba(217,_217,_217,_0.18)] backdrop-filter backdrop-blur rounded-[12px] [box-shadow:0_4px_6px_rgba(0,_0,_0,_0.1)] overflow-hidden w-[90%] ml-[5%] mr-[5%] h-[250px] hidden">
        <div class="bg-[#202425] px-[15px] py-[10px] flex items-center">
          <span class="text-[#ffffff] text-[14px] font-semibold flex items-center gap-[8px] font-[Ubuntu]">
            <svg
              class="text-[#006adc]"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M4 17l6-6-6-6M12 19h8"></path>
            </svg>
            Terminal
          </span>
        </div>
        <div class="bg-[#202425] text-[#ffffff] p-[15px] font-['Courier_New',_Courier,_monospace] h-full">
          <div class="flex items-center">
            <div class="w-full flex flex-col gap-2">
              <div class="w-full flex flex-row gap-2">
                <p class="py-1 whitespace-nowrap">SELECT * FROM VCFS WHERE</p>
                <input
                  id="terminal-input"
                  type="text"
                  class="border-[#202425] text-[white] [font-family:inherit] outline-[#202425] w-full placeholder-[rgba(255,_255,_255,_0.5)]"
                  placeholder="Enter condition(s)..."
                />
                <span class="w-[8px] h-[1.5] bg-[#ffffff] inline-block animate-[blink_1s_step-end_infinite] ml-[2px]"></span>
              </div>
              <p id="stdout" class="hidden text-[black] border-2 border-solid border-green-200 rounded-lg p-1 bg-green-200"></p>
              <p id="stderr" class="hidden text-[black] border-2 border-solid border-red-200 rounded-lg p-1 bg-red-200"></p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="flex flex-row w-full bg-[linear-gradient(to_right,_white_50%,_#111111_50%)]">
      <div class="flex w-1/2 justify-center">
        <div data-component="error-popup" class="font-[system-ui,_-apple-system,_BlinkMacSystemFont,_'Segoe_UI',_Roboto,_Oxygen,_Ubuntu,_Cantarell,_'Open_Sans',_'Helvetica_Neue',_sans-serif] w-[320px] p-[12px] hidden flex-row items-center bg-[#EF665B] rounded-[8px] [box-shadow:0px_0px_5px_-3px_#111]">
          <div class="w-[20px] h-[20px] -translate-y-[2px] mr-[8px]">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" height="24" fill="none"><path fill="#393a37" d="m13 13h-2v-6h2zm0 4h-2v-2h2zm-1-15c-1.3132 0-2.61358.25866-3.82683.7612-1.21326.50255-2.31565 1.23915-3.24424 2.16773-1.87536 1.87537-2.92893 4.41891-2.92893 7.07107 0 2.6522 1.05357 5.1957 2.92893 7.0711.92859.9286 2.03098 1.6651 3.24424 2.1677 1.21325.5025 2.51363.7612 3.82683.7612 2.6522 0 5.1957-1.0536 7.0711-2.9289 1.8753-1.8754 2.9289-4.4189 2.9289-7.0711 0-1.3132-.2587-2.61358-.7612-3.82683-.5026-1.21326-1.2391-2.31565-2.1677-3.24424-.9286-.92858-2.031-1.66518-3.2443-2.16773-1.2132-.50254-2.5136-.7612-3.8268-.7612z"></path></svg>
          </div>
          <div class="text-black">No variants were found with these filters.</div>
        </div>
      </div>
      
      <div class="flex w-1/2 justify-center">
        <div data-component="error-popup" class="font-[system-ui,_-apple-system,_BlinkMacSystemFont,_'Segoe_UI',_Roboto,_Oxygen,_Ubuntu,_Cantarell,_'Open_Sans',_'Helvetica_Neue',_sans-serif] w-[320px] p-[12px] hidden flex-row items-center bg-[#EF665B] rounded-[8px] [box-shadow:0px_0px_5px_-3px_#111]">
          <div class="w-[20px] h-[20px] -translate-y-[2px] mr-[8px]">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" height="24" fill="none"><path fill="#393a37" d="m13 13h-2v-6h2zm0 4h-2v-2h2zm-1-15c-1.3132 0-2.61358.25866-3.82683.7612-1.21326.50255-2.31565 1.23915-3.24424 2.16773-1.87536 1.87537-2.92893 4.41891-2.92893 7.07107 0 2.6522 1.05357 5.1957 2.92893 7.0711.92859.9286 2.03098 1.6651 3.24424 2.1677 1.21325.5025 2.51363.7612 3.82683.7612 2.6522 0 5.1957-1.0536 7.0711-2.9289 1.8753-1.8754 2.9289-4.4189 2.9289-7.0711 0-1.3132-.2587-2.61358-.7612-3.82683-.5026-1.21326-1.2391-2.31565-2.1677-3.24424-.9286-.92858-2.031-1.66518-3.2443-2.16773-1.2132-.50254-2.5136-.7612-3.8268-.7612z"></path></svg>
          </div>
          <div class="text-black">No variants were found with these filters.</div>
        </div>
      </div>
    </div>

    <div class="Container">
        <div class="flex flex-col max-w-full" id="fileTab">
    
            <div class="flex h-[700px] bg-[white]">
              <div class="flex-[1] overflow-hidden relative border-r-[2px_solid_#888]">
                <div class="pt-4 text-center text-black border-b-[2px_solid_#ccc] font-[Ubuntu] font-bold bg-[#EEF0F1]">{{ vcfs.repository[0].informations().basename|default(vcfs.repository[0]) }}
                  <div class="flex flex-row">
                    <p class="text-[15px] text-black mb-0 ml-[5px] font-normal" id="filterSummaryL">Showing all variants</p>
                    {% if tags[0] %}
                      <div class="flex flex-row w-1/2 justify-center gap-1">
                        {% for tag in tags[0] %}
                          <span class="text-[0.875rem] font-bold px-2.5 py-0.5 mb-[5px] rounded-full inline-block bg-[#dbeafe] text-[#1e40af] border-solid border border-[#60A5FA] font-[Ubuntu]">{{ tag | trim }}</span>
                        {% endfor %}
                      </div>
                    {% endif %}  
                  </div>
                </div>
                <div class="absolute mt-[30px] top-[37px] bottom-[0] left-[0] right-[0] overflow-y-scroll overflow-x-auto bg-white" id="content1">
                  <div class="">
                    <div id="file-header-left" class="w-fit h-[32px] box-border flex items-center px-[8px] py-[2px] whitespace-pre font-[monospace] bg-[rgba(255,_255,_255,_0.2)]">
                      <div class="text-[#888] mr-[10px] select-none min-w-[30px] text-right">0</div>
                        <span data-component="column-header" class="text-black bg-[rgba(255,_255,_255,_0.2)] table-cell px-[8px] py-[2px] whitespace-nowrap">
                          {{ view['headers'][vcfs.repository[0]] }}
                        </span>
                    </div>
                    {% for index, series in view['variants'].iterrows() -%}
                      {% if series['Variant.L']|is_nan or series['Variant.R']|is_nan -%}
                        <div data-component="file-content-left" status="mismatch" row="{{ loop.index0 }}" class="w-fit h-[32px] box-border flex items-center px-[8px] py-[2px] whitespace-pre font-[monospace] bg-[rgba(255,_0,_0,_0.2)]" id="{{ series['Chromosome']|upper() }} {{ series['Type']|upper() }} {{ series['Filter.L']|upper() }}" chrom="{{ series['Chromosome']|upper() }}" type="{{ series['Type']|upper() }}" filter="{{ series['Filter.L']|upper() }}" position="{{ series['Position'] }}" {% for tag in ((series['Variant.L']|string)|format_to_html).items() -%} {{ tag[0] }}={{ tag[1] }} {% endfor -%}>
                          <div class="text-[#888] mr-[10px] select-none min-w-[30px] text-right">{{ loop.index }}</div>
                          {% if not series['Variant.L']|is_nan %}
                            <span data-component="column-diff" class="text-black bg-[rgba(255,_0,_0,_0.2)] table-cell px-[8px] py-[2px] whitespace-nowrap">
                              {{ series['Variant.L'] -}}
                            </span>
                          {% endif %}
                        </div>
                      {% else -%}
                        <div data-component="file-content-left" status="match" row="{{ loop.index0 }}" class="w-fit h-[32px] box-border flex items-center px-[8px] py-[2px] whitespace-pre font-[monospace] bg-[rgba(0,_255,_0,_0.2)]" id="{{ series['Chromosome']|upper() }} {{ series['Type']|upper() }} {{ series['Filter.L']|upper() }}" chrom="{{ series['Chromosome']|upper() }}" type="{{ series['Type']|upper() }}" filter="{{ series['Filter.L']|upper() }}" pos="{{ series['Position'] }}" {% for tag in ((series['Variant.L']|string)|format_to_html).items() -%} {{ tag[0] }}={{ tag[1] }} {% endfor -%}>
                          <div class="text-[#888] mr-[10px] select-none min-w-[30px] text-right">{{ loop.index }}</div>
                          <span data-component="column-match" class="text-black bg-[rgba(0,_255,_0,_0.2)] table-cell px-[8px] py-[2px] whitespace-nowrap">
                            {{ series['Variant.L'] -}}
                          </span>
                        </div>
                      {% endif %}    
                    {% endfor %}
                  </div>
                </div>
              </div>
              <div class="flex-[1] overflow-hidden relative border-[#ccc]">
                <div class="pt-4 text-center border-b-[2px_solid_#ccc] font-[Ubuntu] font-bold bg-[#333333] text-white">{{ vcfs.repository[1].informations().basename|default(vcfs.repository[1]) }} 
                  <div class="flex flex-row">
                    <p class="text-[15px] mb-0 ml-[5px] font-normal" id="filterSummaryR">Showing all variants</p>
                    {% if tags[1] %}
                      <div class="flex flex-row w-1/2 justify-center gap-1">
                        {% for tag in tags[1] %}
                          <span class="text-[0.875rem] font-bold px-2.5 py-0.5 mb-[5px] rounded-full inline-block bg-[#dbeafe] text-[#1e40af] border-solid border border-[#60A5FA] font-[Ubuntu]">{{ tag | trim }}</span>
                        {% endfor %}
                      </div>
                    {% endif %}  
                  </div> 
                </div>
                <div class="absolute mt-[30px] top-[37px] bottom-[0] left-[0] right-[0] overflow-y-scroll overflow-x-auto bg-white" id="content2">
                  <div class="">
                    <div id="file-header-right" class="w-fit h-[32px] box-border flex items-center px-[8px] py-[2px] whitespace-pre font-[monospace] bg-[rgba(255,_255,_255,_0.2)]">
                      <div class="text-[#888] mr-[10px] select-none min-w-[30px] text-right">0</div>
                        <span data-component="column-header" class="text-black bg-[rgba(255,_255,_255,_0.2)] table-cell px-[8px] py-[2px] whitespace-nowrap">
                          {{ view['headers'][vcfs.repository[1]] }}
                        </span>
                    </div>
                    {% for index, series in view['variants'].iterrows() -%}
                      {% if series['Variant.L']|is_nan or series['Variant.R']|is_nan -%}
                        <div data-component="file-content-right" row="{{ loop.index0 }}" status="mismatch" class="w-fit h-[32px] box-border flex items-center px-[8px] py-[2px] whitespace-pre font-[monospace] bg-[rgba(255,_0,_0,_0.2)]" id="{{ series['Chromosome']|upper() }} {{ series['Type']|upper() }} {{ series['Filter.R']|upper() }}" chrom="{{ series['Chromosome']|upper() }}" type="{{ series['Type']|upper() }}" filter="{{ series['Filter.R']|upper() }}" position={{ series['Position'] }} {% for tag in ((series['Variant.R']|string)|format_to_html).items() -%} {{ tag[0] }}={{ tag[1] }} {% endfor -%}>
                          <div class="text-[#888] mr-[10px] select-none min-w-[30px] text-right">{{ loop.index }}</div>
                          {% if not series['Variant.R']|is_nan %}
                            <span data-component="column-diff" class="text-black bg-[rgba(255,_0,_0,_0.2)] table-cell px-[8px] py-[2px] whitespace-nowrap">
                              {{ series['Variant.R'] -}}
                            </span>
                          {% endif %}
                        </div>
                      {% else -%}
                        <div data-component="file-content-right" status="match" row="{{ loop.index0 }}" class="w-fit h-[32px] box-border flex items-center px-[8px] py-[2px] whitespace-pre font-[monospace] bg-[rgba(0,_255,_0,_0.2)]" id="{{ series['Chromosome']|upper() }} {{ series['Type']|upper() }} {{ series['Filter.R']|upper() }}" chrom="{{ series['Chromosome']|upper() }}" type="{{ series['Type']|upper() }}" filter="{{ series['Filter.R']|upper() }}" position={{ series['Position'] }} {% for tag in ((series['Variant.R']|string)|format_to_html).items() -%} {{ tag[0] }}={{ tag[1] }} {% endfor -%}>
                          <div class="text-[#888] mr-[10px] select-none min-w-[30px] text-right">{{ loop.index }}</div>
                          <span data-component="column-match" class="text-black bg-[rgba(0,_255,_0,_0.2)] table-cell px-[8px] py-[2px] whitespace-nowrap">
                            {{ series['Variant.R'] -}}
                          </span>
                        </div>
                      {% endif %}
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>
            
            <div class="summary-container" id="stats">

              <section class="p-3 bg-[#f3f4f6]">

                <div class="w-full flex justify-center items-center">
                  <div class="w-[50%] max-w-[1200px] mx-[auto] my-[0] grid grid-cols-[1fr] sm:grid-cols-[1fr_1fr] lg:grid-cols-[1fr_1fr_1fr] place-items-center gap-1">
                    
                    <div class="w-fit flex p-4 rounded-lg bg-[#fafafa] gap-4">
                      <div class="flex justify-center items-center p-2 rounded-lg bg-green-400">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="white" class="h-9 w-9">
                          <rect x="96" y="176" width="320" height="48" rx="8" ry="8"/>
                          <rect x="96" y="288" width="320" height="48" rx="8" ry="8"/>
                        </svg>
                      </div>
                      <div data-component="general-card-datas" class="flex flex-col justify-center">
                        <p class="text-[1.875rem] text-black font-semibold leading-none">{{ view["common"] }}</p>
                        <p class="text-black capitalize font-[Ubuntu]">Matching lines</p>
                      </div>
                      <div class="relative group flex w-5 h-5">
                        <svg class="relative z-0" xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" height="24" fill="none">
                          <path fill="#509AF8" d="m12 1.5c-5.79844 0-10.5 4.70156-10.5 10.5 0 5.7984 4.70156 10.5 10.5 10.5 5.7984 0 10.5-4.7016 10.5-10.5 0-5.79844-4.7016-10.5-10.5-10.5zm.75 15.5625c0 .1031-.0844.1875-.1875.1875h-1.125c-.1031 0-.1875-.0844-.1875-.1875v-6.375c0-.1031.0844-.1875.1875-.1875h1.125c.1031 0 .1875.0844.1875.1875zm-.75-8.0625c-.2944-.00601-.5747-.12718-.7808-.3375-.206-.21032-.3215-.49305-.3215-.7875s.1155-.57718.3215-.7875c.2061-.21032.4864-.33149.7808-.3375.2944.00601.5747.12718.7808.3375.206.21032.3215.49305.3215.7875s-.1155.57718-.3215.7875c-.2061.21032-.4864.33149-.7808.3375z">
                          </path>
                        </svg>
                        <div class="absolute left-full ml-2 w-[300px] hidden group-hover:block z-10">
                          <p class="text-info-content !bg-[#D7F1FD] rounded-2xl pt-[0.1em] pr-[16px] pb-[0.1em] pl-[16px]"><strong>Matching</strong> criteria is based on: <strong>chromosome - position - reference allele - alternative allele</strong></p>
                        </div>
                      </div>
                    </div>
                    
                    <div class="w-fit flex p-4 rounded-lg bg-[#fafafa] gap-4">
                      <div class="flex justify-center items-center p-2 rounded-lg bg-red-400">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="white" class="h-9 w-9">
                          <rect x="96" y="176" width="320" height="48" rx="8" ry="8"/>
                          <rect x="96" y="288" width="320" height="48" rx="8" ry="8"/>
                          <line x1="120" y1="400" x2="392" y2="112" stroke="white" stroke-width="48" stroke-linecap="round"/>
                        </svg>
                      </div>
                      <div data-component="general-card-datas" class="flex flex-col justify-center">
                        <p class="text-[1.875rem] text-black font-semibold leading-none">{{ view["unique"].values() | sum }}</p>
                        <p class="text-black capitalize font-[Ubuntu]">Different lines</p>
                      </div>
                      <div class="relative group flex w-5 h-5">
                        <svg class="relative z-0" xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" height="24" fill="none">
                          <path fill="#509AF8" d="m12 1.5c-5.79844 0-10.5 4.70156-10.5 10.5 0 5.7984 4.70156 10.5 10.5 10.5 5.7984 0 10.5-4.7016 10.5-10.5 0-5.79844-4.7016-10.5-10.5-10.5zm.75 15.5625c0 .1031-.0844.1875-.1875.1875h-1.125c-.1031 0-.1875-.0844-.1875-.1875v-6.375c0-.1031.0844-.1875.1875-.1875h1.125c.1031 0 .1875.0844.1875.1875zm-.75-8.0625c-.2944-.00601-.5747-.12718-.7808-.3375-.206-.21032-.3215-.49305-.3215-.7875s.1155-.57718.3215-.7875c.2061-.21032.4864-.33149.7808-.3375.2944.00601.5747.12718.7808.3375.206.21032.3215.49305.3215.7875s-.1155.57718-.3215.7875c-.2061.21032-.4864.33149-.7808.3375z">
                          </path>
                        </svg>
                        <div class="absolute left-full ml-2 w-[300px] hidden group-hover:block z-10">
                          <p class="text-info-content !bg-[#D7F1FD] rounded-2xl pt-[0.1em] pr-[16px] pb-[0.1em] pl-[16px]"><strong>Mismatch</strong> criteria is based on: <strong>chromosome - position - reference allele - alternative allele</strong></p>
                        </div>
                      </div>
                    </div>
                    
                    <div class="w-fit flex p-4 rounded-lg bg-[#fafafa] gap-4">
                      <div class="flex justify-center items-center p-2 rounded-lg bg-purple-400">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="white" class="h-9 w-9">
                          <circle cx="200" cy="256" r="120" fill="none" stroke="white" stroke-width="24" opacity="0.8"/>
                          <circle cx="312" cy="256" r="120" fill="none" stroke="white" stroke-width="24" opacity="0.8"/>
                          <path d="M256,184 a72,72 0 0,1 0,144 a72,72 0 0,1 0,-144" fill="white" opacity="0.6"/>
                          <text x="256" y="256" font-size="40" text-anchor="middle" dominant-baseline="middle" fill="white">J</text>
                        </svg>
                      </div>
                      <div data-component="general-card-datas" class="flex flex-col justify-center">
                        <p class="text-[1.875rem] text-black font-semibold leading-none">{{ view["jaccard"] }}</p>
                        <p class="text-black capitalize font-[Ubuntu]">Jaccard index</p>
                      </div>
                      <div class="relative group flex w-5 h-5">
                        <svg class="relative z-0" xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" height="24" fill="none">
                          <path fill="#509AF8" d="m12 1.5c-5.79844 0-10.5 4.70156-10.5 10.5 0 5.7984 4.70156 10.5 10.5 10.5 5.7984 0 10.5-4.7016 10.5-10.5 0-5.79844-4.7016-10.5-10.5-10.5zm.75 15.5625c0 .1031-.0844.1875-.1875.1875h-1.125c-.1031 0-.1875-.0844-.1875-.1875v-6.375c0-.1031.0844-.1875.1875-.1875h1.125c.1031 0 .1875.0844.1875.1875zm-.75-8.0625c-.2944-.00601-.5747-.12718-.7808-.3375-.206-.21032-.3215-.49305-.3215-.7875s.1155-.57718.3215-.7875c.2061-.21032.4864-.33149.7808-.3375.2944.00601.5747.12718.7808.3375.206.21032.3215.49305.3215.7875s-.1155.57718-.3215.7875c-.2061.21032-.4864.33149-.7808.3375z">
                          </path>
                        </svg>
                        <div class="absolute left-full ml-2 w-[300px] hidden group-hover:block z-10">
                          <p class="text-info-content !bg-[#D7F1FD] rounded-2xl pt-[0.1em] pr-[16px] pb-[0.1em] pl-[16px]"><strong>Jaccard Index</strong> calculated as: <strong>common variant / total unique variants</strong></p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div> 
                <div class="flex flex-row bg-[#f3f4f6] mt-[10px]">
                  <div class="w-full ml-[10px] grid grid-cols-[1fr] lg:grid-cols-[1fr_1fr] 2xl:grid-cols-[1fr_1fr_1fr] gap-[1.0rem]">
                    <div class="flex p-4 rounded-lg bg-[#fafafa] gap-4">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 250" width="125" height="150">
                        <g transform="translate(100, 100)">
                        <!-- SNP (Single Nucleotide Polymorphism) Icon -->
                          <circle cx="0" cy="0" r="70" fill="#f8f9fa" stroke="#6c757d" stroke-width="3"/>
                          <text x="0" y="-20" font-family="Ubuntu" font-size="18" text-anchor="middle" fill="#212529">SNP</text>
                          <!-- DNA base representation -->
                          <rect x="-40" y="5" width="20" height="20" fill="#4285F4" rx="3" ry="3"/>
                          <rect x="-10" y="5" width="20" height="20" fill="#EA4335" rx="3" ry="3"/>
                          <rect x="20" y="5" width="20" height="20" fill="#34A853" rx="3" ry="3"/>
                          <text x="-30" y="20" font-family="Ubuntu" font-size="16" text-anchor="middle" fill="white">A</text>
                          <text x="0" y="20" font-family="Ubuntu" font-size="16" text-anchor="middle" fill="white">C</text>
                          <text x="30" y="20" font-family="Ubuntu" font-size="16" text-anchor="middle" fill="white">T</text>
                          <path d="M0,35 L0,45 M-10,45 L10,45" stroke="#212529" stroke-width="3"/>
                          <path d="M-3,50 L3,50" stroke="#EA4335" stroke-width="5" stroke-linecap="round"/>
                        </g>
                      </svg>
                      <div data-component="variant-card-datas" class="flex flex-col justify-center">
                        <ul class="list-none" id="file-legend-snp">
                          <li class="inline">
                            <a class="inline-flex flex-nowrap items-center text-sm mr-[3px]">
                              <svg class="inline-block mr-[0.5rem]" fill="currentColor" height="16" width="16" viewBox="0 0 16 16">
                                <path fill="#2C7A7B" d="M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z"></path>
                              </svg>
                              <span class="text-black mr-[0.25rem]">
                                {{ vcfs.repository[0].informations().basename }}
                              </span>
                              <span data-component="file-legend-value-left" class="text-black font-semibold">NA</span>
                            </a>
                          </li>
                          <li class="inline">
                            <a class="inline-flex flex-nowrap items-center text-sm mr-[3px]">
                              <svg class="inline-block mr-[0.5rem]" fill="currentColor" height="16" width="16" viewBox="0 0 16 16">
                                <path fill="#822E4A" d="M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z"></path>
                              </svg>
                              <span class="text-black mr-[0.25rem]">
                                {{ vcfs.repository[1].informations().basename }}
                              </span>
                              <span data-component="file-legend-value-right" class="text-black font-semibold">NA</span>
                            </a>
                          </li>
                        </ul>
                        <div class="w-full h-[25px] rounded-full bg-[#E5E7EB]" id="stats-bar-snp">
                          <div class="h-full bg-[#2C7A7B] opacity-75 float-left rounded-tl-full rounded-bl-full">
                          </div>
                          <div class="h-full bg-[#822E4A] opacity-75 float-left rounded-tr-full rounded-br-full">
                          </div>
                        </div>
                        <img src="statics/versus.png" alt="versus-icon" class="w-[39px] h-[39px] self-center">
                      </div>
                    </div>

                    <div class="flex p-4 rounded-lg bg-[#fafafa] gap-4">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 250" width="125" height="150">
                        <g transform="translate(100, 100)">
                          <circle cx="0" cy="0" r="70" fill="#f8f9fa" stroke="#6c757d" stroke-width="3"/>
                          <text x="0" y="-20" font-family="Ubuntu" font-size="18" text-anchor="middle" fill="#212529">MNP</text>
                          <!-- Multiple DNA bases -->
                          <rect x="-50" y="5" width="20" height="20" fill="#4285F4" rx="3" ry="3"/>
                          <rect x="-25" y="5" width="20" height="20" fill="#EA4335" rx="3" ry="3"/>
                          <rect x="0" y="5" width="20" height="20" fill="#FBBC05" rx="3" ry="3"/>
                          <rect x="25" y="5" width="20" height="20" fill="#34A853" rx="3" ry="3"/>
                          <text x="-40" y="20" font-family="Ubuntu" font-size="16" text-anchor="middle" fill="white">A</text>
                          <text x="-15" y="20" font-family="Ubuntu" font-size="16" text-anchor="middle" fill="white">C</text>
                          <text x="10" y="20" font-family="Ubuntu" font-size="16" text-anchor="middle" fill="white">G</text>
                          <text x="35" y="20" font-family="Ubuntu" font-size="16" text-anchor="middle" fill="white">T</text>
                          <path d="M0,35 L0,45 M-25,45 L25,45" stroke="#212529" stroke-width="3"/>
                          <path d="M-18,50 L18,50" stroke="#EA4335" stroke-width="5" stroke-linecap="round"/>
                        </g>
                      </svg>
                      <div data-component="variant-card-datas" class="flex flex-col justify-center">
                        <ul class="list-none" id="file-legend-mnp">
                          <li class="inline">
                            <a class="inline-flex flex-nowrap items-center text-sm mr-[3px]">
                              <svg class="inline-block mr-[0.5rem]" fill="currentColor" height="16" width="16" viewBox="0 0 16 16">
                                <path fill="#2C7A7B" d="M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z"></path>
                              </svg>
                              <span class="text-black mr-[0.25rem]">
                                {{ vcfs.repository[0].informations().basename }}
                              </span>
                              <span data-component="file-legend-value-left" class="text-black font-semibold">NA</span>
                            </a>
                          </li>
                          <li class="inline">
                            <a class="inline-flex flex-nowrap items-center text-sm mr-[3px]">
                              <svg class="inline-block mr-[0.5rem]" fill="currentColor" height="16" width="16" viewBox="0 0 16 16">
                                <path fill="#822E4A" d="M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z"></path>
                              </svg>
                              <span class="text-black mr-[0.25rem]">
                                {{ vcfs.repository[1].informations().basename }}
                              </span>
                              <span data-component="file-legend-value-right" class="text-black font-semibold">NA</span>
                            </a>
                          </li>
                        </ul>
                        <div class="w-full h-[25px] rounded-full bg-[#E5E7EB]" id="stats-bar-mnp">
                          <div class="h-full bg-[#2C7A7B] opacity-75 float-left rounded-tl-full rounded-bl-full">
                          </div>
                          <div class="h-full bg-[#822E4A] opacity-75 float-left rounded-tr-full rounded-br-full">
                          </div>
                        </div>
                        <img src="statics/versus.png" alt="versus-icon" class="w-[39px] h-[39px] self-center">
                      </div>
                    </div>

                    <div class="flex p-4 rounded-lg bg-[#fafafa] gap-4">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 250" width="125" height="150">
                        <g transform="translate(100, 100)">
                          <circle cx="0" cy="0" r="70" fill="#f8f9fa" stroke="#6c757d" stroke-width="3"/>
                          <text x="0" y="-20" font-family="Ubuntu" font-size="18" text-anchor="middle" fill="#212529">SV</text>
                          <!-- DNA strand restructuring representation -->
                          <path d="M-45,5 L-15,5 L-15,15 L-45,15 Z" fill="#4285F4"/>
                          <path d="M-10,5 L20,5 L20,15 L-10,15 Z" fill="#34A853"/>
                          <path d="M25,5 L45,5 L45,15 L25,15 Z" fill="#EA4335"/>
                          <path d="M-45,20 L-25,20 L-25,30 L-45,30 Z" fill="#4285F4"/>
                          <path d="M25,20 L45,20 L45,30 L25,30 Z" fill="#34A853"/>
                          <path d="M-20,20 L20,20 L20,30 L-20,30 Z" fill="#EA4335"/>
                          <!-- Arrows indicating structural change -->
                          <path d="M0,35 C-15,45 15,45 0,55" fill="none" stroke="#212529" stroke-width="2" marker-end="url(#arrowhead)"/>
                          <path d="M-25,35 C-40,45 -10,45 -25,55" fill="none" stroke="#212529" stroke-width="2" marker-end="url(#arrowhead)"/>
                          <path d="M25,35 C10,45 40,45 25,55" fill="none" stroke="#212529" stroke-width="2" marker-end="url(#arrowhead)"/>
                          <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#212529"/>
                          </marker>
                        </g>
                      </svg>
                      <div data-component="variant-card-datas" class="flex flex-col justify-center">
                        <ul class="list-none" id="file-legend-sv">
                          <li class="inline">
                            <a class="inline-flex flex-nowrap items-center text-sm mr-[3px]">
                              <svg class="inline-block mr-[0.5rem]" fill="currentColor" height="16" width="16" viewBox="0 0 16 16">
                                <path fill="#2C7A7B" d="M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z"></path>
                              </svg>
                              <span class="text-black mr-[0.25rem]">
                                {{ vcfs.repository[0].informations().basename }}
                              </span>
                              <span data-component="file-legend-value-left" class="text-black font-semibold">NA</span>
                            </a>
                          </li>
                          <li class="inline">
                            <a class="inline-flex flex-nowrap items-center text-sm mr-[3px]">
                              <svg class="inline-block mr-[0.5rem]" fill="currentColor" height="16" width="16" viewBox="0 0 16 16">
                                <path fill="#822E4A" d="M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z"></path>
                              </svg>
                              <span class="text-black mr-[0.25rem]">
                                {{ vcfs.repository[1].informations().basename }}
                              </span>
                              <span data-component="file-legend-value-right" class="text-black font-semibold">NA</span>
                            </a>
                          </li>
                        </ul>
                        <div class="w-full h-[25px] rounded-full bg-[#E5E7EB]" id="stats-bar-sv">
                          <div class="h-full bg-[#2C7A7B] opacity-75 float-left rounded-tl-full rounded-bl-full">
                          </div>
                          <div class="h-full bg-[#822E4A] opacity-75 float-left rounded-tr-full rounded-br-full">
                          </div>
                        </div>
                        <img src="statics/versus.png" alt="versus-icon" class="w-[39px] h-[39px] self-center">
                      </div>
                    </div>


                    <div class="flex p-4 rounded-lg bg-[#fafafa] gap-4">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 250" width="125" height="150">
                        <g transform="translate(100, 100)">
                          <circle cx="0" cy="0" r="70" fill="#f8f9fa" stroke="#6c757d" stroke-width="3"/>
                          <text x="0" y="-20" font-family="Ubuntu" font-size="18" text-anchor="middle" fill="#212529">INDEL</text>
                          <!-- DNA strand with insertion/deletion -->
                          <rect x="-45" y="0" width="15" height="15" fill="#4285F4" rx="2" ry="2"/>
                          <rect x="-25" y="0" width="15" height="15" fill="#EA4335" rx="2" ry="2"/>
                          <rect x="-5" y="0" width="15" height="15" fill="#FBBC05" rx="2" ry="2"/>
                          <rect x="15" y="0" width="15" height="15" fill="#34A853" rx="2" ry="2"/>
                          <rect x="35" y="0" width="15" height="15" fill="#4285F4" rx="2" ry="2"/>
                          
                          <!-- Reference strand -->
                          <rect x="-45" y="25" width="15" height="15" fill="#4285F4" rx="2" ry="2"/>
                          <rect x="-25" y="25" width="15" height="15" fill="#EA4335" rx="2" ry="2"/>
                          <!-- Gap representing deletion -->
                          <rect x="15" y="25" width="15" height="15" fill="#34A853" rx="2" ry="2"/>
                          <rect x="35" y="25" width="15" height="15" fill="#4285F4" rx="2" ry="2"/>
                          
                          <!-- Arrows indicating insertion/deletion -->
                          <path d="M-5,17 L15,17" stroke="#212529" stroke-width="1.5"/>
                          <path d="M5,15 L5,19" stroke="#212529" stroke-width="1.5"/>
                          <path d="M-5,42 L15,42" stroke="#212529" stroke-width="1.5"/>
                          <line x1="5" y1="25" x2="5" y2="42" stroke="#212529" stroke-width="1.5" stroke-dasharray="3,3"/>
                        </g>
                      </svg>
                      <div data-component="variant-card-datas" class="flex flex-col justify-center">
                        <ul class="list-none" id="file-legend-indel">
                          <li class="inline">
                            <a class="inline-flex flex-nowrap items-center text-sm mr-[3px]">
                              <svg class="inline-block mr-[0.5rem]" fill="currentColor" height="16" width="16" viewBox="0 0 16 16">
                                <path fill="#2C7A7B" d="M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z"></path>
                              </svg>
                              <span class="text-black mr-[0.25rem]">
                                {{ vcfs.repository[0].informations().basename }}
                              </span>
                              <span data-component="file-legend-value-left" class="text-black font-semibold">NA</span>
                            </a>
                          </li>
                          <li class="inline">
                            <a class="inline-flex flex-nowrap items-center text-sm mr-[3px]">
                              <svg class="inline-block mr-[0.5rem]" fill="currentColor" height="16" width="16" viewBox="0 0 16 16">
                                <path fill="#822E4A" d="M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z"></path>
                              </svg>
                              <span class="text-black mr-[0.25rem]">
                                {{ vcfs.repository[1].informations().basename }}
                              </span>
                              <span data-component="file-legend-value-right" class="text-black font-semibold">NA</span>
                            </a>
                          </li>
                        </ul>
                        <div class="w-full h-[25px] rounded-full bg-[#E5E7EB]" id="stats-bar-indel">
                          <div class="h-full bg-[#2C7A7B] opacity-75 float-left rounded-tl-full rounded-bl-full">
                          </div>
                          <div class="h-full bg-[#822E4A] opacity-75 float-left rounded-tr-full rounded-br-full">
                          </div>
                        </div>
                        <img src="statics/versus.png" alt="versus-icon" class="w-[39px] h-[39px] self-center">
                      </div>
                    </div>


                    <div class="flex p-4 rounded-lg bg-[#fafafa] gap-4">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 250" width="125" height="150">
                        <g transform="translate(100, 100)">
                          <circle cx="0" cy="0" r="70" fill="#f8f9fa" stroke="#6c757d" stroke-width="3"/>
                          <text x="0" y="-20" font-family="Ubuntu" font-size="18" text-anchor="middle" fill="#212529">INV</text>
                          
                          <!-- Original DNA sequence -->
                          <rect x="-45" y="0" width="15" height="15" fill="#4285F4" rx="2" ry="2"/>
                          <rect x="-25" y="0" width="15" height="15" fill="#EA4335" rx="2" ry="2"/>
                          <rect x="-5" y="0" width="15" height="15" fill="#FBBC05" rx="2" ry="2"/>
                          <rect x="15" y="0" width="15" height="15" fill="#34A853" rx="2" ry="2"/>
                          <rect x="35" y="0" width="15" height="15" fill="#4285F4" rx="2" ry="2"/>
                          
                          <text x="-37.5" y="12" font-family="Ubuntu" font-size="12" text-anchor="middle" fill="white">A</text>
                          <text x="-17.5" y="12" font-family="Ubuntu" font-size="12" text-anchor="middle" fill="white">C</text>
                          <text x="2.5" y="12" font-family="Ubuntu" font-size="12" text-anchor="middle" fill="white">G</text>
                          <text x="22.5" y="12" font-family="Ubuntu" font-size="12" text-anchor="middle" fill="white">T</text>
                          <text x="42.5" y="12" font-family="Ubuntu" font-size="12" text-anchor="middle" fill="white">A</text>
                          
                          <!-- Inverted DNA sequence -->
                          <rect x="-45" y="35" width="15" height="15" fill="#4285F4" rx="2" ry="2"/>
                          <rect x="-25" y="35" width="15" height="15" fill="#34A853" rx="2" ry="2"/>
                          <rect x="-5" y="35" width="15" height="15" fill="#FBBC05" rx="2" ry="2"/>
                          <rect x="15" y="35" width="15" height="15" fill="#EA4335" rx="2" ry="2"/>
                          <rect x="35" y="35" width="15" height="15" fill="#4285F4" rx="2" ry="2"/>
                          
                          <text x="-37.5" y="47" font-family="Ubuntu" font-size="12" text-anchor="middle" fill="white">A</text>
                          <text x="-17.5" y="47" font-family="Ubuntu" font-size="12" text-anchor="middle" fill="white">T</text>
                          <text x="2.5" y="47" font-family="Ubuntu" font-size="12" text-anchor="middle" fill="white">G</text>
                          <text x="22.5" y="47" font-family="Ubuntu" font-size="12" text-anchor="middle" fill="white">C</text>
                          <text x="42.5" y="47" font-family="Ubuntu" font-size="12" text-anchor="middle" fill="white">A</text>
                          
                          <!-- Arrows showing inversion -->
                          <path d="M-15,20 C-15,25 15,30 15,20" fill="none" stroke="#212529" stroke-width="2" marker-end="url(#arrowhead2)"/>
                          <path d="M15,20 C15,25 -15,30 -15,20" fill="none" stroke="#212529" stroke-width="2" marker-end="url(#arrowhead2)"/>
                          <marker id="arrowhead2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#212529"/>
                          </marker>
                        </g>
                      </svg>
                      <div data-component="variant-card-datas" class="flex flex-col justify-center">
                        <ul class="list-none" id="file-legend-inversion">
                          <li class="inline">
                            <a class="inline-flex flex-nowrap items-center text-sm mr-[3px]">
                              <svg class="inline-block mr-[0.5rem]" fill="currentColor" height="16" width="16" viewBox="0 0 16 16">
                                <path fill="#2C7A7B" d="M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z"></path>
                              </svg>
                              <span class="text-black mr-[0.25rem]">
                                {{ vcfs.repository[0].informations().basename }}
                              </span>
                              <span data-component="file-legend-value-left" class="text-black font-semibold">NA</span>
                            </a>
                          </li>
                          <li class="inline">
                            <a class="inline-flex flex-nowrap items-center text-sm mr-[3px]">
                              <svg class="inline-block mr-[0.5rem]" fill="currentColor" height="16" width="16" viewBox="0 0 16 16">
                                <path fill="#822E4A" d="M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z"></path>
                              </svg>
                              <span class="text-black mr-[0.25rem]">
                                {{ vcfs.repository[1].informations().basename }}
                              </span>
                              <span data-component="file-legend-value-right" class="text-black font-semibold">NA</span>
                            </a>
                          </li>
                        </ul>
                        <div class="w-full h-[25px] rounded-full bg-[#E5E7EB]" id="stats-bar-inv">
                          <div class="h-full bg-[#2C7A7B] opacity-75 float-left rounded-tl-full rounded-bl-full">
                          </div>
                          <div class="h-full bg-[#822E4A] opacity-75 float-left rounded-tr-full rounded-br-full">
                          </div>
                        </div>
                        <img src="statics/versus.png" alt="versus-icon" class="w-[39px] h-[39px] self-center">
                      </div>
                    </div>
                    

                    <div class="flex p-4 rounded-lg bg-[#fafafa] gap-4">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 250" width="125" height="150">
                        <g transform="translate(100, 100)">
                          <circle cx="0" cy="0" r="70" fill="#f8f9fa" stroke="#6c757d" stroke-width="3"/>
                          <text x="0" y="-20" font-family="Arial" font-size="18" text-anchor="middle" fill="#212529">Complex</text>
                          
                          <!-- DNA sequences with multiple variant types -->
                          <rect x="-45" y="-5" width="15" height="15" fill="#4285F4" rx="2" ry="2"/>
                          <rect x="-25" y="-5" width="15" height="15" fill="#EA4335" rx="2" ry="2"/>
                          <rect x="-5" y="-5" width="15" height="15" fill="#FBBC05" rx="2" ry="2"/>
                          <rect x="15" y="-5" width="15" height="15" fill="#34A853" rx="2" ry="2"/>
                          <rect x="35" y="-5" width="15" height="15" fill="#4285F4" rx="2" ry="2"/>
                          
                          <!-- Modified sequence with multiple variant types -->
                          <rect x="-45" y="25" width="15" height="15" fill="#4285F4" rx="2" ry="2"/>
                          <!-- Missing base (deletion) -->
                          <rect x="-5" y="25" width="25" height="15" fill="#EA4335" rx="2" ry="2"/>
                          <!-- Different base (SNP) -->
                          <rect x="25" y="25" width="15" height="15" fill="#34A853" rx="2" ry="2"/>
                          <rect x="45" y="25" width="15" height="15" fill="#4285F4" rx="2" ry="2"/>
                          
                          <!-- Mixed effect indicators -->
                          <path d="M-37.5,-5 L-37.5,25" stroke="#212529" stroke-width="1" stroke-dasharray="2,2"/>
                          <path d="M-17.5,-5 L-17.5,10" stroke="#212529" stroke-width="1" stroke-dasharray="2,2"/>
                          <path d="M2.5,-5 L7.5,25" stroke="#212529" stroke-width="1" stroke-dasharray="2,2"/>
                          <path d="M22.5,-5 L32.5,25" stroke="#212529" stroke-width="1" stroke-dasharray="2,2"/>
                          <path d="M42.5,-5 L52.5,25" stroke="#212529" stroke-width="1" stroke-dasharray="2,2"/>
                          
                          <!-- Variant type symbols -->
                          <circle cx="-17.5" y="15" r="3" fill="#EA4335"/>
                          <rect x="2.5" y="12" width="6" height="6" fill="#FBBC05"/>
                          <path d="M30,15 l4,-4 l4,4 l-4,4 z" fill="#34A853"/>
                          
                          <!-- "Multiple effects" indicator -->
                          <path d="M0,50 L-20,60 L20,60 Z" fill="#6c757d"/>
                        </g>
                      </svg>
                      <div data-component="variant-card-datas" class="flex flex-col justify-center">
                        <ul class="list-none" id="file-legend-cv">
                          <li class="inline">
                            <a class="inline-flex flex-nowrap items-center text-sm mr-[3px]">
                              <svg class="inline-block mr-[0.5rem]" fill="currentColor" height="16" width="16" viewBox="0 0 16 16">
                                <path fill="#2C7A7B" d="M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z"></path>
                              </svg>
                              <span class="text-black mr-[0.25rem]">
                                {{ vcfs.repository[0].informations().basename }}
                              </span>
                              <span data-component="file-legend-value-left" class="text-black font-semibold">NA</span>
                            </a>
                          </li>
                          <li class="inline">
                            <a class="inline-flex flex-nowrap items-center text-sm mr-[3px]">
                              <svg class="inline-block mr-[0.5rem]" fill="currentColor" height="16" width="16" viewBox="0 0 16 16">
                                <path fill="#822E4A" d="M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z"></path>
                              </svg>
                              <span class="text-black mr-[0.25rem]">
                                {{ vcfs.repository[1].informations().basename }}
                              </span>
                              <span data-component="file-legend-value-right" class="text-black font-semibold">NA</span>
                            </a>
                          </li>
                        </ul>
                        <div class="w-full h-[25px] rounded-full bg-[#E5E7EB]" id="stats-bar-comp">
                          <div class="h-full bg-[#2C7A7B] opacity-75 float-left rounded-tl-full rounded-bl-full">
                          </div>
                          <div class="h-full bg-[#822E4A] opacity-75 float-left rounded-tr-full rounded-br-full">
                          </div>
                        </div>
                        <img src="statics/versus.png" alt="versus-icon" class="w-[39px] h-[39px] self-center">
                      </div>
                    </div>

                  </div>
                </div> 

              </section>

              <div class="visible opacity-100 w-full relative flex justify-center [transition:opacity_0.3s_ease-in-out] bg-[#f3f4f6]">
                {% if view["jaccard"] < 0.9 %}
                  {{ view["plots"].as_html()[0] }}
                {% endif %}
              </div>

            </div>

        </div>

        {% if table is not none %}
          <div style="display: flex; flex-direction: column; width: 100%; background: #f3f4f6;">
            <div class="tooltip tooltip-info w-fit ml-[5%]" data-tip="Benchmarking is carried out on exact equality in terms of chromosome, position, reference and alternative allele.">
              <button class="btn btn-info !bg-[#D7F1FD] !border-[#D7F1FD] !outline-[#D7F1FD] !shadow-none">
                <svg
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  fill="none"
                  class="w-4 h-4"
                >
                  <path
                    d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                    stroke-width="2"
                    stroke-linejoin="round"
                    stroke-linecap="round"
                  ></path>
                </svg>
                Hover for Info
              </button>
            </div>
            <table class="w-[90%] self-center [box-shadow:0_4px_6px_-1px_rgba(0,_0,_0,_0.1),_0_2px_4px_-1px_rgba(0,_0,_0,_0.06)] font-[Ubuntu] text-[#6B7280]">
              <tbody>
                <tr class="flex flex-row w-full border-b border-gray-200 bg-[#E5E7EB] h-[50px] items-center">
                  <th class="flex flex-row w-full">TYPE</th>
                  <th class="flex flex-row w-full">FILTER</th>
                  <th class="flex flex-row w-full">
                    <div style="display: flex; align-items: center;">
                      TRUTH TOTAL
                      <a href="#">
                        <svg style="width:0.75rem; height:0.75rem" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="black" viewBox="0 0 24 24">
                          <path d="M8.574 11.024h6.852a2.075 2.075 0 0 0 1.847-1.086 1.9 1.9 0 0 0-.11-1.986L13.736 2.9a2.122 2.122 0 0 0-3.472 0L6.837 7.952a1.9 1.9 0 0 0-.11 1.986 2.074 2.074 0 0 0 1.847 1.086Zm6.852 1.952H8.574a2.072 2.072 0 0 0-1.847 1.087 1.9 1.9 0 0 0 .11 1.985l3.426 5.05a2.123 2.123 0 0 0 3.472 0l3.427-5.05a1.9 1.9 0 0 0 .11-1.985 2.074 2.074 0 0 0-1.846-1.087Z"/>
                        </svg>
                      </a>
                    </div>
                  </th>
                  <th class="flex flex-row w-full">
                    <div style="display: flex; align-items: center;">
                      TRUE POSITIVE
                      <a href="#">
                        <svg style="width:0.75rem; height:0.75rem" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="black" viewBox="0 0 24 24">
                          <path d="M8.574 11.024h6.852a2.075 2.075 0 0 0 1.847-1.086 1.9 1.9 0 0 0-.11-1.986L13.736 2.9a2.122 2.122 0 0 0-3.472 0L6.837 7.952a1.9 1.9 0 0 0-.11 1.986 2.074 2.074 0 0 0 1.847 1.086Zm6.852 1.952H8.574a2.072 2.072 0 0 0-1.847 1.087 1.9 1.9 0 0 0 .11 1.985l3.426 5.05a2.123 2.123 0 0 0 3.472 0l3.427-5.05a1.9 1.9 0 0 0 .11-1.985 2.074 2.074 0 0 0-1.846-1.087Z"/>
                        </svg>
                      </a>
                    </div>
                  </th>
                  <th class="flex flex-row w-full">
                    <div style="display: flex; align-items: center;">
                      FALSE NEGATIVE
                      <a href="#">
                        <svg style="width:0.75rem; height:0.75rem" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="black" viewBox="0 0 24 24">
                          <path d="M8.574 11.024h6.852a2.075 2.075 0 0 0 1.847-1.086 1.9 1.9 0 0 0-.11-1.986L13.736 2.9a2.122 2.122 0 0 0-3.472 0L6.837 7.952a1.9 1.9 0 0 0-.11 1.986 2.074 2.074 0 0 0 1.847 1.086Zm6.852 1.952H8.574a2.072 2.072 0 0 0-1.847 1.087 1.9 1.9 0 0 0 .11 1.985l3.426 5.05a2.123 2.123 0 0 0 3.472 0l3.427-5.05a1.9 1.9 0 0 0 .11-1.985 2.074 2.074 0 0 0-1.846-1.087Z"/>
                        </svg>
                      </a>
                    </div>
                  </th>
                  <th class="flex flex-row w-full">
                    <div style="display: flex; align-items: center;">
                      QUERY TOTAL
                      <a href="#">
                        <svg style="width:0.75rem; height:0.75rem" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="black" viewBox="0 0 24 24">
                          <path d="M8.574 11.024h6.852a2.075 2.075 0 0 0 1.847-1.086 1.9 1.9 0 0 0-.11-1.986L13.736 2.9a2.122 2.122 0 0 0-3.472 0L6.837 7.952a1.9 1.9 0 0 0-.11 1.986 2.074 2.074 0 0 0 1.847 1.086Zm6.852 1.952H8.574a2.072 2.072 0 0 0-1.847 1.087 1.9 1.9 0 0 0 .11 1.985l3.426 5.05a2.123 2.123 0 0 0 3.472 0l3.427-5.05a1.9 1.9 0 0 0 .11-1.985 2.074 2.074 0 0 0-1.846-1.087Z"/>
                        </svg>
                      </a>
                    </div>
                  </th>
                  <th class="flex flex-row w-full">
                    <div style="display: flex; align-items: center;">
                      FALSE POSITIVE
                      <a href="#">
                        <svg style="width:0.75rem; height:0.75rem" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="black" viewBox="0 0 24 24">
                          <path d="M8.574 11.024h6.852a2.075 2.075 0 0 0 1.847-1.086 1.9 1.9 0 0 0-.11-1.986L13.736 2.9a2.122 2.122 0 0 0-3.472 0L6.837 7.952a1.9 1.9 0 0 0-.11 1.986 2.074 2.074 0 0 0 1.847 1.086Zm6.852 1.952H8.574a2.072 2.072 0 0 0-1.847 1.087 1.9 1.9 0 0 0 .11 1.985l3.426 5.05a2.123 2.123 0 0 0 3.472 0l3.427-5.05a1.9 1.9 0 0 0 .11-1.985 2.074 2.074 0 0 0-1.846-1.087Z"/>
                        </svg>
                      </a>
                    </div>
                  </th>
                  <th class="flex flex-row w-full">
                    <div style="display: flex; align-items: center;">
                      RECALL
                      <a href="#">
                        <svg style="width:0.75rem; height:0.75rem" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="black" viewBox="0 0 24 24">
                          <path d="M8.574 11.024h6.852a2.075 2.075 0 0 0 1.847-1.086 1.9 1.9 0 0 0-.11-1.986L13.736 2.9a2.122 2.122 0 0 0-3.472 0L6.837 7.952a1.9 1.9 0 0 0-.11 1.986 2.074 2.074 0 0 0 1.847 1.086Zm6.852 1.952H8.574a2.072 2.072 0 0 0-1.847 1.087 1.9 1.9 0 0 0 .11 1.985l3.426 5.05a2.123 2.123 0 0 0 3.472 0l3.427-5.05a1.9 1.9 0 0 0 .11-1.985 2.074 2.074 0 0 0-1.846-1.087Z"/>
                        </svg>
                      </a>
                    </div>
                  </th>
                  <th class="flex flex-row w-full">
                    <div style="display: flex; align-items: center;">
                      PRECISION
                      <a href="#">
                        <svg style="width:0.75rem; height:0.75rem" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="black" viewBox="0 0 24 24">
                          <path d="M8.574 11.024h6.852a2.075 2.075 0 0 0 1.847-1.086 1.9 1.9 0 0 0-.11-1.986L13.736 2.9a2.122 2.122 0 0 0-3.472 0L6.837 7.952a1.9 1.9 0 0 0-.11 1.986 2.074 2.074 0 0 0 1.847 1.086Zm6.852 1.952H8.574a2.072 2.072 0 0 0-1.847 1.087 1.9 1.9 0 0 0 .11 1.985l3.426 5.05a2.123 2.123 0 0 0 3.472 0l3.427-5.05a1.9 1.9 0 0 0 .11-1.985 2.074 2.074 0 0 0-1.846-1.087Z"/>
                        </svg>
                      </a>
                    </div>
                  </th>
                  <th class="flex flex-row w-full">
                    <div style="display: flex; align-items: center;">
                      F1 SCORE
                      <a href="#">
                        <svg style="width:0.75rem; height:0.75rem" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="black" viewBox="0 0 24 24">
                          <path d="M8.574 11.024h6.852a2.075 2.075 0 0 0 1.847-1.086 1.9 1.9 0 0 0-.11-1.986L13.736 2.9a2.122 2.122 0 0 0-3.472 0L6.837 7.952a1.9 1.9 0 0 0-.11 1.986 2.074 2.074 0 0 0 1.847 1.086Zm6.852 1.952H8.574a2.072 2.072 0 0 0-1.847 1.087 1.9 1.9 0 0 0 .11 1.985l3.426 5.05a2.123 2.123 0 0 0 3.472 0l3.427-5.05a1.9 1.9 0 0 0 .11-1.985 2.074 2.074 0 0 0-1.846-1.087Z"/>
                        </svg>
                      </a>
                    </div>
                  </th>
                </tr>
                {% for row, metrics in table.iterrows() -%}
                  <tr class="flex flex-row w-full border-b border-gray-200 bg-white odd:bg-gray-100 hover:bg-base-300 h-[50px] items-center">
                    {% for index, metric in metrics.items() -%}
                      {% if metric is float() -%}
                        <td class="flex flex-row w-full mt-[5px] mb-[5px] items-center">{{ metric|round(2, 'common') }}</td>
                      {% elif metric is string() -%}
                        <td class="flex flex-row w-full mt-[5px] mb-[5px] items-center">{{ metric|upper() }}</td>
                      {% else -%}
                        <td class="flex flex-row w-full mt-[5px] mb-[5px] items-center">{{ metric }}</td>
                      {% endif %}  
                    {% endfor %}
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>  
        {% endif %}

        <footer class="footer footer-horizontal footer-center bg-[#f3f4f6] text-black p-5">
          <aside>
            <img src="statics/logo.png" class="w-25 h-25">
            <p class="font-bold">
              VCFDelta v{{ version }}
            </p>
            <div class="flex flex-row gap-1">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="" viewBox="0 0 16 16">
                <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71z"/>
                <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0"/>
              </svg>
              <p>Report generated on {{ date }}</p>
            </div>
          </aside>
          <nav>
            <div class="grid grid-flow-col gap-4">
              <a>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  class="fill-current">
                  <path
                    d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"></path>
                </svg>
              </a>
              <a href="https://github.com/LeoooJR">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="" viewBox="0 0 16 16">
                  <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
                </svg>
              </a>
              <a>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="" viewBox="0 0 16 16">
                  <path d="M3.362 10.11c0 .926-.756 1.681-1.681 1.681S0 11.036 0 10.111.756 8.43 1.68 8.43h1.682zm.846 0c0-.924.756-1.68 1.681-1.68s1.681.756 1.681 1.68v4.21c0 .924-.756 1.68-1.68 1.68a1.685 1.685 0 0 1-1.682-1.68zM5.89 3.362c-.926 0-1.682-.756-1.682-1.681S4.964 0 5.89 0s1.68.756 1.68 1.68v1.682zm0 .846c.924 0 1.68.756 1.68 1.681S6.814 7.57 5.89 7.57H1.68C.757 7.57 0 6.814 0 5.89c0-.926.756-1.682 1.68-1.682zm6.749 1.682c0-.926.755-1.682 1.68-1.682S16 4.964 16 5.889s-.756 1.681-1.68 1.681h-1.681zm-.848 0c0 .924-.755 1.68-1.68 1.68A1.685 1.685 0 0 1 8.43 5.89V1.68C8.43.757 9.186 0 10.11 0c.926 0 1.681.756 1.681 1.68zm-1.681 6.748c.926 0 1.682.756 1.682 1.681S11.036 16 10.11 16s-1.681-.756-1.681-1.68v-1.682h1.68zm0-.847c-.924 0-1.68-.755-1.68-1.68s.756-1.681 1.68-1.681h4.21c.924 0 1.68.756 1.68 1.68 0 .926-.756 1.681-1.68 1.681z"/>
                </svg>
              </a>
            </div>
          </nav>
        </footer>
    </div>

    <script>
        const content1El = document.getElementById('content1');
        const content2El = document.getElementById('content2');
        
        // Sync scrolling between panels
        content1El.addEventListener('scroll', () => {
        content2El.scrollTop = content1El.scrollTop;
        });
        
        content2El.addEventListener('scroll', () => {
        content1El.scrollTop = content2El.scrollTop;
        });

        content1El.addEventListener('scroll', () => {
        content2El.scrollLeft = content1El.scrollLeft;
        });
        
        content2El.addEventListener('scroll', () => {
        content1El.scrollLeft = content2El.scrollLeft;
        });
        
        function interpretTabs(component) {
        document.querySelectorAll(`[data-component="${component}"]`).forEach(element => {
            element.innerHTML = element.innerHTML.split("\\t").join('&nbsp;&nbsp;&nbsp;&nbsp;');
        });
        }
        interpretTabs("column-header")
        interpretTabs("column-match");
        interpretTabs("column-diff");
    </script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
          // Left side plot navigation
          const leftPlots = document.querySelectorAll('[data-component="plot-left"]');
          const leftPrevArrow = document.getElementById('leftPrevArrow');
          const leftNextArrow = document.getElementById('leftNextArrow');
          const leftPlotIndicator = document.getElementById('leftPlotIndicator');
          let leftCurrentPlot = 0;
          
          // Right side plot navigation
          const rightPlots = document.querySelectorAll('[data-component="plot-right"]');
          const rightPrevArrow = document.getElementById('rightPrevArrow');
          const rightNextArrow = document.getElementById('rightNextArrow');
          const rightPlotIndicator = document.getElementById('rightPlotIndicator');
          let rightCurrentPlot = 0;
          
          // Hide arrows if only one plot
          if (leftPlots.length <= 1) {
              leftPrevArrow.classList.replace('flex', 'hidden')
              leftNextArrow.classList.replace('flex', 'hidden')
          }
          
          if (rightPlots.length <= 1) {
              rightPrevArrow.classList.replace('flex', 'hidden')
              rightNextArrow.classList.replace('flex', 'hidden')
          }
          
          // Create dot indicators for left plots
          for (let i = 0; i < leftPlots.length; i++) {
              const dot = document.createElement('div');
              dot.className = i === 0 ? 'w-[10px] h-[10px] rounded-[50%] bg-[#555]' : 'w-[10px] h-[10px] rounded-[50%] bg-[#ccc]';
              leftPlotIndicator.appendChild(dot);
          }
          
          // Create dot indicators for right plots
          for (let i = 0; i < rightPlots.length; i++) {
              const dot = document.createElement('div');
              dot.className = i === 0 ? 'w-[10px] h-[10px] rounded-[50%] bg-[#555]' : 'w-[10px] h-[10px] rounded-[50%] bg-[#ccc]';
              rightPlotIndicator.appendChild(dot);
          }
          
          // Ensure inactive plots are fully hidden
          leftPlots.forEach((plot, index) => {
              if (index !== leftCurrentPlot) {
                  plot.classList.remove('hidden', 'block', 'flex', 'grid', 'inline', 'inline-block');
                  plot.classList.add('hidden');
                  plot.classList.replace("visible", "invisible");
                  plot.classList.remove('col-auto', 'row-auto'); // Remove from grid layout
              } else {
                  plot.classList.remove('hidden');
                  plot.classList.add('block');
                  plot.classList.replace("invisible", "visible");
                  plot.classList.add('col-auto', 'row-auto'); // Add to grid layout
              }
          });
          
          rightPlots.forEach((plot, index) => {
              if (index !== rightCurrentPlot) {
                  plot.classList.remove('hidden', 'block', 'flex', 'grid', 'inline', 'inline-block');
                  plot.classList.add('hidden');
                  plot.classList.replace("visible", "invisible");
                  plot.classList.remove('col-auto', 'row-auto'); // Remove from grid layout
              } else {
                  plot.classList.remove('hidden');
                  plot.classList.add('block');
                  plot.classList.replace("invisible", "visible");
                  plot.classList.add('col-auto', 'row-auto'); // Add to grid layout
              }
          });
          
          // Left plot navigation
          leftPrevArrow.addEventListener('click', () => {
              leftPlots[leftCurrentPlot].classList.replace('block', 'hidden');
              leftPlots[leftCurrentPlot].classList.replace("visible", "invisible");
              leftPlots[leftCurrentPlot].classList.replace("opacity-100", "opacity-0");
              leftPlots[leftCurrentPlot].classList.remove('col-auto', 'row-auto');
              leftPlots[leftCurrentPlot].classList.remove('relative');
              
              leftPlotIndicator.children[leftCurrentPlot].classList.replace("bg-[#555]", "bg-[#ccc]");
              leftCurrentPlot = (leftCurrentPlot - 1 + leftPlots.length) % leftPlots.length;
              
              leftPlots[leftCurrentPlot].classList.replace('hidden', 'block');
              leftPlots[leftCurrentPlot].classList.replace("invisible", "visible");
              leftPlots[leftCurrentPlot].classList.replace("opacity-0", "opacity-100");
              leftPlots[leftCurrentPlot].classList.add('col-auto', 'row-auto');
              leftPlots[leftCurrentPlot].classList.add('relative');
              
              leftPlotIndicator.children[leftCurrentPlot].classList.replace("bg-[#ccc]", "bg-[#555]");
          });
          
          leftNextArrow.addEventListener('click', () => {
              leftPlots[leftCurrentPlot].classList.replace('block', 'hidden');
              leftPlots[leftCurrentPlot].classList.replace("visible", "invisible");
              leftPlots[leftCurrentPlot].classList.replace("opacity-100", "opacity-0");
              leftPlots[leftCurrentPlot].classList.remove('col-auto', 'row-auto');
              leftPlots[leftCurrentPlot].classList.remove('relative');
              
              leftPlotIndicator.children[leftCurrentPlot].classList.replace("bg-[#555]", "bg-[#ccc]");
              leftCurrentPlot = (leftCurrentPlot + 1) % leftPlots.length;
              
              leftPlots[leftCurrentPlot].classList.replace('hidden', 'block');
              leftPlots[leftCurrentPlot].classList.replace("invisible", "visible");
              leftPlots[leftCurrentPlot].classList.replace("opacity-0", "opacity-100");
              leftPlots[leftCurrentPlot].classList.add('col-auto', 'row-auto');
              leftPlots[leftCurrentPlot].classList.add('relative');
              
              leftPlotIndicator.children[leftCurrentPlot].classList.replace("bg-[#ccc]", "bg-[#555]");
          });
          
          // Right plot navigation
          rightPrevArrow.addEventListener('click', () => {
              rightPlots[rightCurrentPlot].classList.replace('block', 'hidden');
              rightPlots[rightCurrentPlot].classList.replace("visible", "invisible");
              rightPlots[rightCurrentPlot].classList.replace("opacity-100", "opacity-0");
              rightPlots[rightCurrentPlot].classList.remove('col-auto', 'row-auto');
              rightPlots[rightCurrentPlot].classList.remove('relative');
              
              rightPlotIndicator.children[rightCurrentPlot].classList.replace("bg-[#555]", "bg-[#ccc]");
              rightCurrentPlot = (rightCurrentPlot - 1 + rightPlots.length) % rightPlots.length;
              
              rightPlots[rightCurrentPlot].classList.replace('hidden', 'block');
              rightPlots[rightCurrentPlot].classList.replace("invisible", "visible");
              rightPlots[rightCurrentPlot].classList.replace("opacity-0", "opacity-100");
              rightPlots[rightCurrentPlot].classList.add('col-auto', 'row-auto');
              rightPlots[rightCurrentPlot].classList.add('relative');
              
              rightPlotIndicator.children[rightCurrentPlot].classList.replace("bg-[#ccc]", "bg-[#555]");
          });
          
          rightNextArrow.addEventListener('click', () => {
              rightPlots[rightCurrentPlot].classList.replace('block', 'hidden');
              rightPlots[rightCurrentPlot].classList.replace("visible", "invisible");
              rightPlots[rightCurrentPlot].classList.replace("opacity-100", "opacity-0");
              rightPlots[rightCurrentPlot].classList.remove('col-auto', 'row-auto');
              rightPlots[rightCurrentPlot].classList.remove('relative');
              
              rightPlotIndicator.children[rightCurrentPlot].classList.replace("bg-[#555]", "bg-[#ccc]");
              rightCurrentPlot = (rightCurrentPlot + 1) % rightPlots.length;
              
              rightPlots[rightCurrentPlot].classList.replace('hidden', 'block');
              rightPlots[rightCurrentPlot].classList.replace("invisible", "visible");
              rightPlots[rightCurrentPlot].classList.replace("opacity-0", "opacity-100");
              rightPlots[rightCurrentPlot].classList.add('col-auto', 'row-auto');
              rightPlots[rightCurrentPlot].classList.add('relative');
              
              rightPlotIndicator.children[rightCurrentPlot].classList.replace("bg-[#ccc]", "bg-[#555]");
          });
      });
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
          document.getElementById("query-chromosome").addEventListener("input", filter);
          document.getElementById("query-status").addEventListener("change", filter);
          document.getElementById("query-filter").addEventListener("change", filter);
          document.getElementById("query-variant").addEventListener("change", filter);
          document.getElementById("terminal-input").addEventListener("keypress", runQuery);
      });
      function filter() {

        const matchs = ["MATCH", "MISMATCH"]
        const filters = ["PASS", "FAIL"]
        const variants = ["SNP", "INDEL", "OTHER"]

        let rowsLeft = document.querySelectorAll('[data-component="file-content-left"]');
        let rowsRight = document.querySelectorAll('[data-component="file-content-right"]');

        let totalLineLeft = document.querySelectorAll('[data-component="file-content-left"] span').length;
        let totalLineRight = document.querySelectorAll('[data-component="file-content-right"] span').length;
          
        let chromosomeUserInput = document.getElementById("query-chromosome");
        
        let chromosomeQuery = chromosomeUserInput ? chromosomeUserInput.value.trim().toUpperCase() : "";
          
        let filtersLeft = document.getElementById("query-status");
        let filtersRight = [document.getElementById("query-filter"), document.getElementById("query-variant")];

        let matchQuery = matchs.includes(filtersLeft.value.toUpperCase()) ? filtersLeft.value : "ALL";
        let variantFilterQuery = filtersRight.length > 0 && filters.includes(filtersRight[0].value) ? filtersRight[0].value.toUpperCase() : "ALL";
        let variantTypeQuery = filtersRight.length > 1 && variants.includes(filtersRight[1].value) ? filtersRight[1].value.toUpperCase() : "ALL";

        let statsByVariantType = document.querySelectorAll('[data-component="variant-card-datas"]');

        let countVisibleLeft = 0;
        let countVisibleRight = 0;
        let countMatchLine = 0;
        let countMismatchLine = 0;

        let countSNP = [0, 0]
        let countINDEL = [0, 0]
        let countSV = [0, 0]

        rowsLeft.forEach((rowLeft, index) => {

            let rowLeftInfs = rowLeft.id.split(" ");
            if (rowLeftInfs.length < 3) return;

            let rowRight = rowsRight[index];
            let rowRightInfs = rowRight.id.split(" ");
              
            let isLineClass = matchQuery === "ALL" || rowLeft.getAttribute("status").toUpperCase() === matchQuery;
      
            let isChromosome = chromosomeQuery === "" || rowLeftInfs[0] == chromosomeQuery;
            let isVariantType = variantTypeQuery === "ALL" || rowLeftInfs[1] === variantTypeQuery;
            let isVariantFilterLeft = variantFilterQuery === "ALL" || rowLeftInfs[2] === variantFilterQuery;
            let isVariantFilterRight = variantFilterQuery === "ALL" || rowRightInfs[2] === variantFilterQuery;
    
            let isRowVisible = (isChromosome && isVariantType && isLineClass && (isVariantFilterLeft || isVariantFilterRight));

            countMatchLine = isRowVisible && rowLeft.getAttribute("status").toUpperCase() === "MATCH" ? ++countMatchLine : countMatchLine;
            countMismatchLine = isRowVisible && rowLeft.getAttribute("status").toUpperCase() === "MISMATCH" ? ++countMismatchLine : countMismatchLine;

            if (isRowVisible){
              let variantType;
              if (rowLeft.querySelector("span")){
                variantType = rowLeftInfs[1].toUpperCase();
                if (variantType == "SNP") {
                  ++countSNP[0];
                }
                else if (variantType == "INDEL"){
                  ++countINDEL[0];
                }
                else if (variantType == "SV"){
                  ++countSV[0];
                }
              }

              if (rowRight.querySelector("span")){
                variantType = rowRightInfs[1].toUpperCase();
                if (variantType == "SNP") {
                  ++countSNP[1];
                }
                else if (variantType == "INDEL"){
                  ++countINDEL[1];
                }
                else if (variantType == "SV"){
                  ++countSV[1];
                }
              }
            }

            console.log(`Row ${index}:`, {
                isChromosome, isVariantType, isLineClass, isVariantFilterLeft, isVariantFilterRight, isRowVisible
            });

            countVisibleLeft = isRowVisible && rowLeft.querySelector("span") ? ++countVisibleLeft : countVisibleLeft;
            countVisibleRight = isRowVisible && rowRight.querySelector("span") ? ++countVisibleRight : countVisibleRight;

            if (isRowVisible) {
              rowLeft.classList.replace("hidden", "flex");
              rowRight.classList.replace("hidden", "flex");
            }
            else {
              rowLeft.classList.replace("flex", "hidden");
              rowRight.classList.replace("flex", "hidden");
            }
        });
          
        document.getElementById("filterSummaryL").innerText = `Showing ${countVisibleLeft} variants out of ${totalLineLeft}`;
        document.getElementById("filterSummaryR").innerText = `Showing ${countVisibleRight} variants out of ${totalLineRight}`;

        if (countVisibleLeft+countVisibleRight == 0) {
          document.querySelectorAll('[data-component="error-popup"]').forEach(error => error.classList.replace('hidden', 'flex'));
        }
        else {
          document.querySelectorAll('[data-component="error-popup"]').forEach(error => error.classList.replace('flex', 'hidden'));
        }

        let statsGeneral = document.querySelectorAll('[data-component="general-card-datas"]');
        statsGeneral[0].children[0].textContent = countMatchLine;
        statsGeneral[1].children[0].textContent = countMismatchLine;
        statsGeneral[2].children[0].textContent = (countMatchLine / (countVisibleLeft + countVisibleRight - countMatchLine)).toPrecision(3);

        statsByVariantType.forEach((composition) => {

          let valueLeftFile = composition.firstElementChild.querySelector('[data-component="file-legend-value-left"]');
          let valueRightFile = composition.firstElementChild.querySelector('[data-component="file-legend-value-right"]');

          let bar = composition.children[1];

          let progresses = bar.children;
            
          if (bar.id == "stats-bar-snp"){

            valueLeftFile.textContent = `${countSNP[0]}`;
            valueRightFile.textContent = `${countSNP[1]}`;

            let sumSNP = (countSNP.reduce((accumulator, currentValue) => accumulator + currentValue, 0))
            let pourcentageLeft = sumSNP ? ((countSNP[0] / sumSNP) * 100) : 0;
            let pourcentageRight = sumSNP ? ((countSNP[1] / sumSNP) * 100) : 0;
              
            if (pourcentageLeft == 100) {
              progresses[0].style.borderTopRightRadius = "9999px";
              progresses[0].style.borderBottomRightRadius = "9999px";  
            }
            else if (pourcentageRight == 100){
              progresses[1].style.borderTopLeftRadius = "9999px";
              progresses[1].style.borderBottomLeftRadius = "9999px";
            }
            else {
              progresses[0].style.borderTopRightRadius = "0px";
              progresses[0].style.borderBottomRightRadius = "0px";
              progresses[1].style.borderTopLeftRadius = "0px";
              progresses[1].style.borderBottomLeftRadius = "0px";
            }

            progresses[0].style.width = pourcentageLeft + "%";
            progresses[1].style.width = pourcentageRight + "%";
          }
          else if (bar.id == "stats-bar-indel"){

            valueLeftFile.textContent = `${countINDEL[0]}`;
            valueRightFile.textContent = `${countINDEL[1]}`;

            let sumINDEL = (countINDEL.reduce((accumulator, currentValue) => accumulator + currentValue, 0));
            let pourcentageLeft = sumINDEL ? ((countINDEL[0] / sumINDEL) * 100) : 0;
            let pourcentageRight = sumINDEL ? ((countINDEL[1] / sumINDEL) * 100) : 0;
              
            if (pourcentageLeft == 100) {
              progresses[0].style.borderTopRightRadius = "9999px";
              progresses[0].style.borderBottomRightRadius = "9999px";  
            }
            else if (pourcentageRight == 100){
              progresses[1].style.borderTopLeftRadius = "9999px";
              progresses[1].style.borderBottomLeftRadius = "9999px";
            }
            else {
              progresses[0].style.borderTopRightRadius = "0px";
              progresses[0].style.borderBottomRightRadius = "0px";
              progresses[1].style.borderTopLeftRadius = "0px";
              progresses[1].style.borderBottomLeftRadius = "0px";
            }

            progresses[0].style.width = pourcentageLeft + "%";
            progresses[1].style.width = pourcentageRight + "%";
          }
          else if (bar.id == "stats-bar-sv"){

            valueLeftFile.textContent = `${countSV[0]}`;
            valueRightFile.textContent = `${countSV[1]}`;

            let sumSV = (countSV.reduce((accumulator, currentValue) => accumulator + currentValue, 0));
            let pourcentageLeft = sumSV ? ((countSV[0] / sumSV) * 100) : 0;
            let pourcentageRight = sumSV ? ((countSV[1] / sumSV) * 100) : 0;
            
            if (pourcentageLeft == 100) {
              progresses[0].style.borderTopRightRadius = "9999px";
              progresses[0].style.borderBottomRightRadius = "9999px";  
            }
            else if (pourcentageRight == 100){
              progresses[1].style.borderTopLeftRadius = "9999px";
              progresses[1].style.borderBottomLeftRadius = "9999px";
            }
            else {
              progresses[0].style.borderTopRightRadius = "0px";
              progresses[0].style.borderBottomRightRadius = "0px";
              progresses[1].style.borderTopLeftRadius = "0px";
              progresses[1].style.borderBottomLeftRadius = "0px";
            }

            progresses[0].style.width = pourcentageLeft + "%";
            progresses[1].style.width = pourcentageRight + "%";
          }
        })
      }

      function runQuery() {

        if (event.key === "Enter") {

          const start = performance.now();
          const stderr = document.getElementById('stderr')
          stderr.classList.replace("flex", "hidden")
          stderr.textContent = "";
          const stdout = document.getElementById("stdout");
          stdout.classList.replace("flex", "hidden");
          stdout.textContent = "";
          resetFilters();
          const leftContent = document.getElementById("content1");
          const rightContent = document.getElementById("content2");
          const variantsDivsLeft = leftContent.querySelectorAll('[data-component="file-content-left"]');
          const variantsDivsRight = rightContent.querySelectorAll('[data-component="file-content-right"]');
          variantsDivsLeft.forEach((divLeft, index) => {
            divLeft.classList.replace('flex', 'hidden');
            variantsDivsRight[index].classList.replace('flex', 'hidden');
          })
          const suffix = document.getElementById('terminal-input').value;
          const filterCommonKeywords = ["CHROM", "POS", "ID", "REF", "ALT", "QUAL", "TYPE", "FILTER", "INFO", "FORMAT", "ROW", "STATUS"];
          const filterLeftKeywords = [{%- if vcfs.repository[0].variants.format -%}{% for key in vcfs.repository[0].variants.format -%}"{{ key }}"{% if not loop.last %}, {% endif %}{% endfor %}{%- endif -%}];
          const filterRightKeywords = [{%- if vcfs.repository[1].variants.format -%}{% for key in vcfs.repository[1].variants.format -%}"{{ key }}"{% if not loop.last %}, {% endif %}{% endfor %}{%- endif -%}];
          const queryKeywords = ["=", "AND", "OR"];
          const variantsLeft = collectVariants(variantsDivsLeft, filterCommonKeywords.concat(filterLeftKeywords));
          const variantsRight = collectVariants(variantsDivsRight, filterCommonKeywords.concat(filterRightKeywords));
          const tokens = tokenizeQuery(suffix)
          const queries = buildQueries(tokens)
          console.log(queries);
          const statsByVariantType = document.querySelectorAll('[data-component="variant-card-datas"]');
          const totalLineLeft = leftContent.querySelectorAll('span:not([data-component="column-header"])').length;
          const totalLineRight = rightContent.querySelectorAll('span:not([data-component="column-header"])').length;
          let countVisibleLeft = 0;
          let countVisibleRight = 0;
          let countMatchLine = 0;
          let countMismatchLine = 0;
          let countSNP = [0, 0];
          let countINDEL = [0, 0];
          let countSV = [0, 0];

          try {
            
            const resultsLeft = alasql(queries["left"], [variantsLeft]);
            const resultsRight = alasql(queries["right"], [variantsRight]);
            const union = new Set([...resultsLeft.map(result => result.ROW), ...resultsRight.map(result => result.ROW)]);
            union.forEach(element => {

              element = parseInt(element);
              const divLeft = variantsDivsLeft[element];
              let variantType = divLeft.getAttribute("type").toUpperCase();
              let status = divLeft.getAttribute("status");
              
              if (status === "match") {
                ++countMatchLine;
              }
              else {
                ++countMismatchLine;
              }

              if (divLeft.querySelector('span')) {
                ++countVisibleLeft;
                if (variantType === "SNP") {
                  ++countSNP[0];
                }
                else if (variantType === "INDEL") {
                  ++countINDEL[0];
                }
                else if (variantType === "SV") {
                  ++countSV[0];
                }
              }

              const divRight = variantsDivsRight[element];
              variantType = divRight.getAttribute('type').toUpperCase();

              if (divRight.querySelector('span')) {
                ++countVisibleRight;
                if (variantType === "SNP") {
                  ++countSNP[1];
                }
                else if (variantType === "INDEL") {
                  ++countINDEL[1];
                }
                else if (variantType === "SV") {
                  ++countSV[1];
                }
              }

              divLeft.classList.replace("hidden", "flex");
              divRight.classList.replace("hidden", "flex");

            });
            document.getElementById("filterSummaryL").innerText = `Showing ${countVisibleLeft} variants out of ${totalLineLeft}`;
            document.getElementById("filterSummaryR").innerText = `Showing ${countVisibleRight} variants out of ${totalLineRight}`;
            if (countVisibleLeft+countVisibleRight == 0) {
              document.querySelectorAll('[data-component="error-popup"]').forEach(error => error.classList.replace('hidden', 'flex'));
            }
            else {
              document.querySelectorAll('[data-component="error-popup"]').forEach(error => error.classList.replace('flex', 'hidden'));
            }
            const statsGeneral = document.querySelectorAll('[data-component="general-card-datas"]');
            statsGeneral[0].children[0].textContent = countMatchLine;
            statsGeneral[1].children[0].textContent = countMismatchLine;
            statsGeneral[2].children[0].textContent = (countMatchLine / (countVisibleLeft + countVisibleRight - countMatchLine)).toPrecision(3);
            stdout.classList.replace("hidden", "flex");
            const end = performance.now();
            stdout.textContent = `js:(vcc)> SELECT * FROM VCFS WHERE ${suffix} (${end - start} ms)`;
          } catch(e) {
            stderr.classList.replace("hidden", "flex");
            stderr.textContent = e.message;
          }
        }
      }

      function tokenizeQuery(query) {

        query = query.trim().replace(/\s+/g, ' ');

        const pattern = /\s+(AND|OR|NOT)\s+/gi;

        const rawParts = query.split(pattern);

        const result = [];
        for (let i = 0; i < rawParts.length; i++) {
          const clause = rawParts[i].trim();
          let operator = null;

          if (i + 1 < rawParts.length && /^(AND|OR|NOT)$/i.test(rawParts[i + 1])) {
            operator = rawParts[i + 1].toUpperCase();
            i += 1;
          }

          result.push([clause, operator]);
        }
        console.log(result)
        return result;
      }

      function buildQueries(clauses) {

        const prefix = "SELECT * from ? WHERE";

        let suffixLeft = [];
        let suffixRight = [];

        clauses.forEach(([clause, operator], index) => {
          
          const isL = clause.trim().startsWith('L.');
          const isR = clause.trim().startsWith('R.');
          const isCommon = !isL && !isR;

          if (isL || isCommon) {

            const cleanedClause = clause.replace('L.', '');

            suffixLeft.push(cleanedClause);

            if (operator && (index + 1) < clauses.length && (clauses[index + 1][0].startsWith('L.') || (!clauses[index + 1][0].startsWith('R.') && !clauses[index + 1][0].startsWith('L.')))) {
              suffixLeft.push(operator);
            }

          }

          if(isR || isCommon) {

            const cleanedClause = clause.replace('R.', '');

            suffixRight.push(cleanedClause);

            if (operator && (index + 1) < clauses.length && (clauses[index + 1][0].startsWith('R.') || (!clauses[index + 1][0].startsWith('R.') && !clauses[index + 1][0].startsWith('L.')))) {
              suffixRight.push(operator);
            }

          }
        })

        return {"left": `${prefix} ${suffixLeft.join(' ')}`, "right": `${prefix} ${suffixRight.join(' ')}`};
      }

      function collectVariants(collectionDivs, keywords) {
        const variants = Array.from(collectionDivs).map((div, index) => {
          const obj = {};
          keywords.forEach(k => {
            let val = div.getAttribute(k);
            obj[k] = val;
          })
          return obj;
        });
        console.log(variants)
        return variants;
      }

      function resetFilters() {
          document.getElementById("query-chromosome").value = "";
          document.getElementById("query-filter").value = "ALL";
          document.getElementById("query-variant").value = "ALL";
          document.getElementById("query-status").value = "ALL";
          // document.getElementById('terminal-input').value = "";
          // document.getElementById("stdout").classList.replace("flex", "hidden");
          document.querySelectorAll('[data-component="error-popup"]').forEach(error => error.classList.replace('flex', 'hidden'));
          filter();
      }

    </script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("dropdown-icon-left").addEventListener("click", updateDisplay)
        document.getElementById("dropdown-icon-right").addEventListener("click", updateDisplay)
        document.getElementById("terminal-icon").addEventListener("click", updateDisplay)
      });

      function updateDisplay() {
        if (this.id === "dropdown-icon-left" || this.id === "dropdown-icon-right") {
          let element = document.getElementById("command");
          if (element.classList.contains('hidden')) {
            element.classList.replace('hidden', 'block');
            document.querySelectorAll('[data-component="notification-metadata"]').forEach((notification) => notification.classList.add('hidden'))
          }
          else {
            element.classList.replace('block', 'hidden');
            document.querySelectorAll('[data-component="notification-metadata"]').forEach((notification) => notification.classList.remove('hidden'))
          }
          elements = document.querySelectorAll('[data-component="info-popup"]');
          elements.forEach(popup => {
            if (popup.classList.contains('hidden')) {
              popup.classList.replace('hidden', 'flex');
            }
            else {
              popup.classList.replace('flex', 'hidden');
            }
          });
        }
        else if (this.id === "terminal-icon") {
          let element = document.getElementById("terminal");
          if (element.classList.contains('hidden')) {
            element.classList.replace('hidden', 'block')
          }
          else {
            element.classList.replace('block', 'hidden')
          }
        }
      }

      function highlightCommand() {
        const tag = document.getElementById("command").querySelectorAll('code')[0];
        const command = tag.textContent;
        tag.innerText = ''
        console.log(command);
        const tokens = command.split(' ');
        tokens.forEach((token, index) => {
          const element = document.createElement('code');
          if (index === 0) {
            element.style.color = "#50fa7b";
          }
          else {
            if (token.includes('/')) {
              element.style.color = "#8be9fd";
            }
            else {
              element.style.color = "white";
            } 
          }
          const text = document.createTextNode(index === 0 ? token : ` ${token}`);
          element.appendChild(text);
          tag.appendChild(element);
        })
        console.log(tag.textContent)
      }

    </script>
    <script>
      // Create the loop button element
      const loopButton = document.createElement('button');
      loopButton.className = 'loop-button';
      loopButton.textContent = 'Loop Differences';
      loopButton.title = 'Auto-scroll through differences';
      loopButton.style.position = 'fixed';
      loopButton.style.bottom = '20px';
      loopButton.style.right = '20px';
      loopButton.style.padding = '10px 15px';
      loopButton.style.backgroundColor = '#4f46e5';
      loopButton.style.color = 'white';
      loopButton.style.border = 'none';
      loopButton.style.borderRadius = '16px';
      loopButton.style.cursor = 'pointer';
      loopButton.style.fontFamily = 'Ubuntu';
      loopButton.style.fontWeight = 'bold';
      loopButton.style.boxShadow = '0 2px 5px rgba(0,0,0,0.2)';
      loopButton.style.zIndex = '999';

      // Add indicator for active/inactive state
      const loopStatusIndicator = document.createElement('span');
      loopStatusIndicator.style.display = 'inline-block';
      loopStatusIndicator.style.width = '10px';
      loopStatusIndicator.style.height = '10px';
      loopStatusIndicator.style.backgroundColor = '#ddd';
      loopStatusIndicator.style.borderRadius = '50%';
      loopStatusIndicator.style.marginRight = '8px';
      loopButton.prepend(loopStatusIndicator);

      // Append button to body
      document.body.appendChild(loopButton);

      // Variables for looping functionality
      let loopActive = false;
      let loopInterval = null;
      let currentDiffIndex = -1;
      let diffElements = [];

      // Function to update diff elements array
      function updateDiffElements() {
          const file1Diffs = Array.from(document.getElementById('content1').querySelectorAll('[data-component="column-diff"]')).filter(el => el.style.display !== 'hidden');
          diffElements = file1Diffs;
          console.log(`Found ${diffElements.length} differences`);
          currentDiffIndex = diffElements.length > 0 ? 0 : -1;
      }

      // Function to scroll to specific diff
      function scrollToDiff(index) {
          if (index >= 0 && index < diffElements.length) {
              const diffElement = diffElements[index];
              
              // Scroll both panels to the same position
              const file1Content = document.getElementById('content1');
              const file2Content = document.getElementById('content2');
              
              // Calculate scroll position (center the diff in the viewport)
              const elementTop = diffElement.offsetTop;
              const containerHeight = file1Content.clientHeight;
              const scrollPosition = elementTop - (containerHeight / 2) + (diffElement.clientHeight / 2);
              
              // Smooth scroll to the element
              file1Content.scrollTo({ top: scrollPosition, behavior: 'smooth' });
              file2Content.scrollTo({ top: scrollPosition, behavior: 'smooth' });
              
              // Highlight current difference with a temporary effect
              diffElement.style.transition = 'background-color 0.5s ease';
              const originalColor = diffElement.style.backgroundColor;
              diffElement.style.backgroundColor = 'rgba(255, 165, 0, 0.5)'; // Highlight color
              
              // Reset highlight after a delay
              setTimeout(() => {
                  diffElement.style.backgroundColor = originalColor;
              }, 800);
          }
      }

      // Toggle loop functionality
      function toggleLoop() {
          loopActive = !loopActive;
          
          if (loopActive) {
              // Update indicator to show active state
              loopStatusIndicator.style.backgroundColor = '#ff5722';
              
              // Initialize diff elements and index
              updateDiffElements();
              
              if (diffElements.length > 0) {
                  // Start looping through differences
                  loopInterval = setInterval(() => {
                      scrollToDiff(currentDiffIndex);
                      currentDiffIndex = (currentDiffIndex + 1) % diffElements.length;
                  }, 2000); // Adjust timing as needed
                  
                  // Scroll to first difference immediately
                  scrollToDiff(currentDiffIndex);
              } else {
                  // No differences found
                  alert('No differences found to loop through');
                  loopActive = false;
                  loopStatusIndicator.style.backgroundColor = '#ddd';
              }
          } else {
              // Stop looping
              clearInterval(loopInterval);
              loopStatusIndicator.style.backgroundColor = '#ddd';
          }
      }

      // Add click event to toggle button
      loopButton.addEventListener('click', toggleLoop);

      // Update diff elements when filters change
      document.addEventListener('DOMContentLoaded', function() {
          const filterElements = [
              document.getElementById("query-chromosome"),
              ...document.getElementById("query-status"),
              ...document.getElementById("query-filter"),
              ...document.getElementById("query-variant"),
          ];
          
          filterElements.forEach(element => {
              if (element) {
                  element.addEventListener("change", function() {
                      // If loop is active, restart it to account for new filter
                      if (loopActive) {
                          clearInterval(loopInterval);
                          updateDiffElements();
                          
                          if (diffElements.length > 0) {
                              loopInterval = setInterval(() => {
                                  scrollToDiff(currentDiffIndex);
                                  currentDiffIndex = (currentDiffIndex + 1) % diffElements.length;
                              }, 2000);
                              
                              scrollToDiff(currentDiffIndex);
                          } else {
                              alert('No differences found with current filters');
                              loopActive = false;
                              loopStatusIndicator.style.backgroundColor = '#ddd';
                              toggleLoop(); // Turn off the loop
                          }
                      }
                  });
              }
          });
          
          // Also update when reset button is clicked
          const resetButton = document.getElementById("reset-button");
          if (resetButton) {
              resetButton.addEventListener("click", function() {
                  setTimeout(updateDiffElements, 100); // Small delay to ensure filters are reset
              });
          }
      });

      // Add keyboard shortcut for toggling loop (press 'L')
      document.addEventListener('keydown', function(event) {
          if (event.key.toLowerCase() === 'l') {
              toggleLoop();
          }
      });

      // Add metrics counter to show progress
      const metricsContainer = document.createElement('div');
      metricsContainer.className = 'loop-metrics';
      metricsContainer.style.position = 'fixed';
      metricsContainer.style.bottom = '70px';
      metricsContainer.style.right = '20px';
      metricsContainer.style.padding = '5px 10px';
      metricsContainer.style.backgroundColor = 'rgba(0,0,0,0.7)';
      metricsContainer.style.color = 'white';
      metricsContainer.style.borderRadius = '5px';
      metricsContainer.style.fontFamily = 'Ubuntu';
      metricsContainer.style.fontSize = '12px';
      metricsContainer.style.display = 'none';
      metricsContainer.style.zIndex = '998';
      document.body.appendChild(metricsContainer);

      // Show metrics when loop is active
      function updateMetrics() {
          if (loopActive) {
              metricsContainer.style.display = 'block';
              metricsContainer.textContent = `Showing difference ${currentDiffIndex + 1} of ${diffElements.length}`;
          } else {
              metricsContainer.style.display = 'none';
          }
      }

      // Update the toggle function to call updateMetrics
      const originalToggleLoop = toggleLoop;
      toggleLoop = function() {
          originalToggleLoop();
          updateMetrics();
      };

      // Update metrics when scrolling to a diff
      const originalScrollToDiff = scrollToDiff;
      scrollToDiff = function(index) {
          originalScrollToDiff(index);
          updateMetrics();
      };
    </script>
</body>
</html>